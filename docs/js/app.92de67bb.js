(function(){"use strict";var o={1892:function(o,t,e){var s=e(9318),n=e(700);function r(o,t){const e=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.Wv)(e)}var l=e(5253);const i={},a=(0,l.A)(i,[["render",r]]);var c=a,d=e(83);const h={class:"home wh-100"},u={class:"view-3d wh-100 position-relative",ref:"v3d"};function k(o,t,e,s,r,l){const i=(0,n.g2)("UiPanel"),a=(0,n.g2)("KeyHelpmer"),c=(0,n.g2)("ToolBar");return(0,n.uX)(),(0,n.CE)("div",h,[(0,n.Lk)("div",u,[(0,n.Lk)("canvas",{onClick:t[0]||(t[0]=(...o)=>l.onClick&&l.onClick(...o)),ref:"canvas",onMousemove:t[1]||(t[1]=(...o)=>l.onMove&&l.onMove(...o))},null,544),(0,n.bF)(i,{floors:r.hiddenFloors,construction:r.construction,selected:r.selection?r.selection.uuid:null,onRemove:l.removeSelection,onRotate:l.rotateSelection,onDeselect:l.onDeselect,onAddPart:l.addPart,cursor:r.cursor,onColor:l.setColor,onCad:l.cad,onSave:l.save,onLoadFile:l.loadFile,onToggleFloor:l.toggleFloor,onUpdatePos:l.updateCursor,ref:"uiPanel",onReset:l.reset,onUp:t[2]||(t[2]=o=>l.moveCursor(0,1,0)),onDown:t[3]||(t[3]=o=>l.moveCursor(0,-1,0))},null,8,["floors","construction","selected","onRemove","onRotate","onDeselect","onAddPart","cursor","onColor","onCad","onSave","onLoadFile","onToggleFloor","onUpdatePos","onReset"]),(0,n.bF)(a),(0,n.bF)(c,{selection:r.selection,tool:r.tool,onTool:l.onTool,onColor:l.setColor},null,8,["selection","tool","onTool","onColor"]),t[4]||(t[4]=(0,n.Lk)("div",{class:"about"},"abrakadobr 2025 for FREEDOM DayZ. 3D models and lights by Vlad Kobranov",-1))],512)])}e(4114),e(8111),e(2489),e(116),e(7588);var p=e(1419),m=e(4624),w=e(9983),f=e(5608),g=e(1876);const v={class:"ui-panel"},y={class:"tool-group"},b=["title"],L=["onClick"],C=["title","disabled"],x={class:"tool-group"},M=["title"],$=["title"],F=["title"],j=["title"],I=["title"],E=["title"],P={class:"bottom-panel"},z={class:"tool-group"},O=["title"],R=["title"],S=["title"],A={class:"tool-button"},X={class:"tool-button"},_={class:"tool-button"},B={class:"tool-button"},D={class:"tool-group"},H=["title"],K=["title"],T=["title"],Z={class:"tool-group"},N=["title"];function U(o,t,e,s,r,l){const i=(0,n.g2)("FloorsIcon"),a=(0,n.g2)("CadIcon"),c=(0,n.g2)("PlanksIcon"),d=(0,n.g2)("NailsIcon"),h=(0,n.g2)("CodelockIcon"),u=(0,n.g2)("UpIcon"),k=(0,n.g2)("DownIcon"),p=(0,n.g2)("CursorIcon"),m=(0,n.g2)("SaveIcon"),w=(0,n.g2)("LoadIcon"),f=(0,n.g2)("NewIcon");return(0,n.uX)(),(0,n.CE)(n.FK,null,[(0,n.Lk)("div",v,[(0,n.Lk)("div",y,[(0,n.Lk)("div",{title:o.$t("ui.floors"),class:"tool-button"},[(0,n.bF)(i)],8,b),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.layers,(t=>((0,n.uX)(),(0,n.CE)("button",{key:t,onClick:e=>o.$emit("toggleFloor",t),class:(0,g.C4)(["tool-button",{selected:!e.floors.includes(t)}])},(0,g.v_)(t),11,L)))),128)),(0,n.Lk)("button",{title:o.$t("ui.cad"),onClick:t[0]||(t[0]=t=>o.$emit("cad")),class:(0,g.C4)(["tool-button",{selected:l.layers.length}]),disabled:!l.layers.length},[(0,n.bF)(a)],10,C)]),(0,n.Lk)("div",x,[(0,n.Lk)("div",{title:o.$t("ui.planks"),class:"tool-button"},[(0,n.bF)(c)],8,M),(0,n.Lk)("div",{title:o.$t("ui.planks"),class:"tool-button selected tool-button-w2"},(0,g.v_)(l.resources.planks),9,$),(0,n.Lk)("div",{title:o.$t("ui.nails"),class:"tool-button"},[(0,n.bF)(d)],8,F),(0,n.Lk)("div",{title:o.$t("ui.nails"),class:"tool-button selected tool-button-w2"},(0,g.v_)(l.resources.nails),9,j),(0,n.Lk)("div",{title:o.$t("ui.codelocks"),class:"tool-button"},[(0,n.bF)(h)],8,I),(0,n.Lk)("div",{title:o.$t("ui.codelocks"),class:"tool-button selected tool-button-w2"},(0,g.v_)(l.resources.codelocks),9,E)])]),(0,n.Lk)("div",P,[(0,n.Lk)("div",z,[(0,n.Lk)("button",{title:o.$t("ui.wpup"),onClick:t[1]||(t[1]=t=>o.$emit("up")),class:"tool-button"},[(0,n.bF)(u)],8,O),(0,n.Lk)("button",{title:o.$t("ui.wpdown"),onClick:t[2]||(t[2]=t=>o.$emit("down")),class:"tool-button"},[(0,n.bF)(k)],8,R)]),(0,n.Lk)("div",{title:o.$t("ui.position"),class:"tool-group"},[(0,n.Lk)("div",A,[(0,n.bF)(p)]),(0,n.Lk)("div",X,(0,g.v_)(e.cursor[0]),1),(0,n.Lk)("div",_,(0,g.v_)(e.cursor[1]),1),(0,n.Lk)("div",B,(0,g.v_)(e.cursor[2]),1)],8,S),(0,n.Lk)("div",D,[(0,n.Lk)("button",{title:o.$t("ui.save"),onClick:t[3]||(t[3]=t=>o.$emit("save")),class:"tool-button"},[(0,n.bF)(m)],8,H),(0,n.Lk)("label",{title:o.$t("ui.load"),for:"load-file",class:"tool-button"},[(0,n.bF)(w),(0,n.Lk)("input",{type:"file",id:"load-file",class:"d-none",accept:".json",ref:"fileInput",onChange:t[4]||(t[4]=t=>o.$emit("loadFile",t.target.files[0]))},null,544)],8,K),(0,n.Lk)("button",{title:o.$t("ui.reset"),onClick:t[5]||(t[5]=t=>o.$emit("reset")),class:"tool-button"},[(0,n.bF)(f)],8,T)]),(0,n.Lk)("div",Z,[(0,n.Lk)("button",{title:o.$t("ui.lang"),onClick:t[6]||(t[6]=(...o)=>l.toggleLocale&&l.toggleLocale(...o)),class:"tool-button"},(0,g.v_)(o.$t("lang."+o.$i18n.locale)),9,N)])])],64)}const W={xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",width:"32",height:"32",viewBox:"0 0 7.533 7.533"};function Y(o,t){return(0,n.uX)(),(0,n.CE)("svg",W,t[0]||(t[0]=[(0,n.Lk)("path",{d:"m1.477 1.398 2.117 4.866.072-.19.629-1.648 1.959-.58Zm.335.36L5.81 3.805l-1.641.486-.586 1.531z",style:{color:"#000",fill:"none",stroke:"#000","stroke-opacity":"1","stroke-width":".235405","stroke-dasharray":"none"}},null,-1)]))}const V={},J=(0,l.A)(V,[["render",Y]]);var q=J;const Q={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function G(o,t){return(0,n.uX)(),(0,n.CE)("svg",Q,t[0]||(t[0]=[(0,n.Lk)("path",{d:"M1.202 1.092h6.292l-.66 1.22-4.853.02ZM1.202 5.727h6.292l-.66-1.22-4.853-.02Z",style:{fill:"none",stroke:"#000","stroke-width":".264583","stroke-linecap":"round","stroke-linejoin":"round","paint-order":"markers fill stroke"},transform:"translate(-.115 .824)"},null,-1),(0,n.Lk)("path",{d:"M1.144 3.385h6.344",style:{fill:"none",stroke:"#000","stroke-width":".264583px","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1"},transform:"translate(-.115 .824)"},null,-1)]))}const oo={},to=(0,l.A)(oo,[["render",G]]);var eo=to;const so={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function no(o,t){return(0,n.uX)(),(0,n.CE)("svg",so,t[0]||(t[0]=[(0,n.Lk)("path",{d:"M1.524 2.155v4.71l.357.773.302-.807V2.147M.427 2.139h2.794",style:{fill:"none",stroke:"#000","stroke-width":".264583px","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1"},transform:"rotate(45 3.122 7.13)"},null,-1)]))}const ro={},lo=(0,l.A)(ro,[["render",no]]);var io=lo;const ao={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function co(o,t){return(0,n.uX)(),(0,n.CE)("svg",ao,t[0]||(t[0]=[(0,n.Lk)("path",{d:"M2.005 6.012H7.83l-1.052.835H.953Z",style:{fill:"none",stroke:"#000","stroke-width":".264583","stroke-linecap":"round","stroke-linejoin":"round","paint-order":"markers fill stroke"},transform:"translate(-.158 -1.518)"},null,-1),(0,n.Lk)("path",{d:"M2.005 5.35H7.83l-1.052.835H.953Z",style:{fill:"none",stroke:"#000","stroke-width":".264583","stroke-linecap":"round","stroke-linejoin":"round","paint-order":"markers fill stroke"},transform:"translate(-.158 -1.518)"},null,-1),(0,n.Lk)("path",{d:"M2.005 4.655H7.83l-1.052.836H.953Z",style:{fill:"none",stroke:"#000","stroke-width":".264583","stroke-linecap":"round","stroke-linejoin":"round","paint-order":"markers fill stroke"},transform:"translate(-.158 -1.518)"},null,-1)]))}const ho={},uo=(0,l.A)(ho,[["render",co]]);var ko=uo;const po={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function mo(o,t){return(0,n.uX)(),(0,n.CE)("svg",po,t[0]||(t[0]=[(0,n.Lk)("path",{d:"M-.121.994h6.297v6.297H-.121z",style:{fill:"none",stroke:"#000","stroke-width":".264583","stroke-linecap":"round","stroke-linejoin":"round","stroke-dasharray":"none","stroke-opacity":"1","paint-order":"markers fill stroke"},transform:"translate(1.32 .087)"},null,-1),(0,n.Lk)("path",{d:"M.617 1.708h4.747v1.237H.617zM.755 3.617h.775v.71H.755zM2.599 3.617h.775v.71h-.775zM4.519 3.617h.775v.71h-.775zM.755 4.833h.775v.71H.755zM2.599 4.833h.775v.71h-.775zM4.519 4.833h.775v.71h-.775zM.755 6.019h.775v.71H.755zM2.599 6.019h.775v.71h-.775zM4.519 6.019h.775v.71h-.775z",style:{fill:"none",stroke:"#000","stroke-width":".264583","stroke-linecap":"round","stroke-linejoin":"round","stroke-dasharray":"none","stroke-opacity":"1","paint-order":"markers fill stroke"},transform:"translate(1.32 .087)"},null,-1)]))}const wo={},fo=(0,l.A)(wo,[["render",mo]]);var go=fo;const vo={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function yo(o,t){return(0,n.uX)(),(0,n.CE)("svg",vo,t[0]||(t[0]=[(0,n.Lk)("path",{d:"M4.73 1.98a.543.543 0 0 1-.542.543.543.543 0 0 1-.542-.542.543.543 0 0 1 .542-.543.543.543 0 0 1 .543.543",style:{opacity:"1",fill:"none",stroke:"#000","stroke-width":".264583","stroke-linecap":"round","stroke-linejoin":"round","paint-order":"markers fill stroke","stop-color":"#000","stop-opacity":"1"}},null,-1),(0,n.Lk)("path",{d:"M1.486 4.162a3.46 3.46 0 0 0 2.682 1.279c.99 0 1.933-.427 2.588-1.17",style:{fill:"none",stroke:"#000","stroke-width":".264583","stroke-linecap":"round","stroke-linejoin":"round","paint-order":"markers fill stroke","stop-color":"#000"}},null,-1),(0,n.Lk)("path",{d:"m4.587 2.383 2.34 4.924M3.84 2.358 1.622 7.316M4.18 1.437l.007-.97",style:{fill:"none",stroke:"#000","stroke-width":".264583px","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1"}},null,-1)]))}const bo={},Lo=(0,l.A)(bo,[["render",yo]]);var Co=Lo;const xo={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function Mo(o,t){return(0,n.uX)(),(0,n.CE)("svg",xo,t[0]||(t[0]=[(0,n.Lk)("path",{d:"M1.371 1.714v4.688h5.41v-3.16L5.24 1.705Z",style:{fill:"none",stroke:"#000","stroke-width":".264583px","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1"}},null,-1),(0,n.Lk)("path",{d:"M3.774 7.607V3.805l.768 1.426M3.798 3.837 3.15 5.121",style:{fill:"none",stroke:"#000","stroke-width":".264583px","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1"},transform:"translate(.179 .593)"},null,-1),(0,n.Lk)("path",{d:"M1.992 1.758v1.678h2.63V1.733",style:{fill:"none",stroke:"#000","stroke-width":".264583px","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1"}},null,-1)]))}const $o={},Fo=(0,l.A)($o,[["render",Mo]]);var jo=Fo;const Io={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function Eo(o,t){return(0,n.uX)(),(0,n.CE)("svg",Io,t[0]||(t[0]=[(0,n.Lk)("path",{d:"M1.371 1.714v4.688h5.41v-3.16L5.24 1.705Z",style:{fill:"none",stroke:"#000","stroke-width":".264583px","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1"}},null,-1),(0,n.Lk)("path",{d:"M3.774 7.607V3.805l.768 1.426M3.798 3.837 3.15 5.121",style:{fill:"none",stroke:"#000","stroke-width":".264583px","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1"},transform:"matrix(1 0 0 -1 .179 11.943)"},null,-1),(0,n.Lk)("path",{d:"M1.992 1.758v1.678h2.63V1.733",style:{fill:"none",stroke:"#000","stroke-width":".264583px","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1"}},null,-1)]))}const Po={},zo=(0,l.A)(Po,[["render",Eo]]);var Oo=zo;const Ro={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function So(o,t){return(0,n.uX)(),(0,n.CE)("svg",Ro,t[0]||(t[0]=[(0,n.Lk)("path",{d:"M1.371 1.714v4.688h5.41v-3.16L5.24 1.705Z",style:{fill:"none",stroke:"#000","stroke-width":".264583px","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1"}},null,-1)]))}const Ao={},Xo=(0,l.A)(Ao,[["render",So]]);var _o=Xo;const Bo={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function Do(o,t){return(0,n.uX)(),(0,n.CE)("svg",Bo,t[0]||(t[0]=[(0,n.Lk)("path",{d:"M3.774 7.607V3.805l.768 1.426M3.798 3.837 3.15 5.121",style:{fill:"none",stroke:"#000","stroke-width":".264583px","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1"},transform:"translate(.535 -3.302)"},null,-1),(0,n.Lk)("path",{d:"M2.267 3.521h5.307L6.2 4.946H.893Z",style:{fill:"none",stroke:"#000","stroke-width":".264583","stroke-linecap":"round","stroke-linejoin":"round","paint-order":"markers fill stroke"}},null,-1)]))}const Ho={},Ko=(0,l.A)(Ho,[["render",Do]]);var To=Ko;const Zo={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function No(o,t){return(0,n.uX)(),(0,n.CE)("svg",Zo,t[0]||(t[0]=[(0,n.Lk)("path",{d:"M3.774 7.607V3.805l.768 1.426M3.798 3.837 3.15 5.121",style:{fill:"none",stroke:"#000","stroke-width":".264583px","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1"},transform:"matrix(1 0 0 -1 .535 11.762)"},null,-1),(0,n.Lk)("path",{d:"M2.267 3.521h5.307L6.2 4.946H.893Z",style:{fill:"none",stroke:"#000","stroke-width":".264583","stroke-linecap":"round","stroke-linejoin":"round","paint-order":"markers fill stroke"}},null,-1)]))}const Uo={},Wo=(0,l.A)(Uo,[["render",No]]);var Yo=Wo,Vo={name:"UiPanel",emits:["addPart","updatePos","remove","rotate","deselect","color","toggleFloor","save","loadFile","reset","up","down","cad"],components:{UpIcon:To,DownIcon:Yo,SaveIcon:jo,LoadIcon:Oo,NewIcon:_o,CursorIcon:q,NailsIcon:io,PlanksIcon:ko,CodelockIcon:go,FloorsIcon:eo,CadIcon:Co},props:{cursor:{type:Array,required:!0,default:()=>[0,1,0]},selected:{type:[String,null,void 0],required:!1},construction:{type:[Object,null],required:!1,default:()=>({})},floors:{type:[Array,null,void 0],required:!1,default:()=>[]}},data(){return{cpos:{x:this.cursor[0],y:this.cursor[1],z:this.cursor[2]}}},watch:{cursor:{deep:!0,handler(o){o[0]!==this.cpos.x&&(this.cpos.x=o[0]),o[1]!==this.cpos.y&&(this.cpos.y=o[1]),o[2]!==this.cpos.z&&(this.cpos.z=o[2])}},cpos:{deep:!0,handler(o){o.x===this.cursor[0]&&o.y===this.cursor[1]&&o.z===this.cursor[2]||this.$emit("updatePos",[o.x,o.y,o.z])}}},computed:{parts(){return Object.values(this.construction).filter((o=>!this.floors.includes(o.position[1])))},resources(){const o={nails:0,planks:0,codelocks:0};return this.parts.forEach((t=>{"door"===t.part?(o.nails+=28,o.planks+=8,o.codelocks+=1):(o.nails+=20,o.planks+=10)})),o},layers(){const o=[];return Object.values(this.construction).forEach((t=>{const e=t.position[1];o.includes(e)||o.push(e)})),o.sort()}},methods:{ceil(o,t){return Math.ceil(o/t)},toggleFloor(o){this.$emit("toggleFloor",o)},toggleLocale(){const o=this.$i18n.availableLocales,t=o.findIndex((o=>o===this.$i18n.locale)),e=t===o.length-1?0:t+1;this.$i18n.locale=o[e],localStorage.setItem("locale",this.$i18n.locale)}}};const Jo=(0,l.A)(Vo,[["render",U],["__scopeId","data-v-3d91293e"]]);var qo=Jo;const Qo={class:"key-helper"},Go={key:0,class:"helper-content"},ot={class:"keys-vertical"},tt={class:"key-section"},et={class:"key-group"},st={class:"desc"},nt={class:"key-group"},rt={class:"desc"},lt={class:"key-section"},it={class:"key-group"},at={class:"desc"},ct={class:"key-group"},dt={class:"desc"},ht={class:"key-group"},ut={class:"desc"},kt={class:"key-group"},pt={class:"desc"},mt={class:"key-group"},wt={class:"desc"},ft={class:"key-section"},gt={class:"key-group"},vt={class:"desc"},yt={class:"key-section"},bt={class:"key-group"},Lt={class:"desc"},Ct={class:"key-group"},xt={class:"desc"},Mt={class:"key-group"},$t={class:"desc"},Ft={class:"key-group"},jt={class:"desc"},It={class:"key-group"},Et={class:"desc"},Pt={class:"key-group"},zt={class:"desc"};function Ot(o,t,e,r,l,i){return(0,n.uX)(),(0,n.CE)("div",Qo,[(0,n.Lk)("button",{onClick:t[0]||(t[0]=(...o)=>i.toggle&&i.toggle(...o)),class:"helper-toggle"},(0,g.v_)(l.isOpen?o.$t("keys.hide"):o.$t("keys.button")),1),(0,n.bF)(s.eB,{name:"slide"},{default:(0,n.k6)((()=>[l.isOpen?((0,n.uX)(),(0,n.CE)("div",Go,[(0,n.Lk)("div",ot,[(0,n.Lk)("div",tt,[(0,n.Lk)("h4",null,(0,g.v_)(o.$t("keys.saveload")),1),(0,n.Lk)("div",et,[t[1]||(t[1]=(0,n.Lk)("span",{class:"key"},"Ctrl+C",-1)),(0,n.Lk)("span",st,(0,g.v_)(o.$t("keys.save")),1)]),(0,n.Lk)("div",nt,[t[2]||(t[2]=(0,n.Lk)("span",{class:"key"},"Ctrl+L",-1)),(0,n.Lk)("span",rt,(0,g.v_)(o.$t("keys.load")),1)])]),(0,n.Lk)("div",lt,[t[8]||(t[8]=(0,n.Lk)("h4",null,"Navigation",-1)),(0,n.Lk)("div",it,[t[3]||(t[3]=(0,n.Lk)("span",{class:"key"},"↑↓←→",-1)),(0,n.Lk)("span",at,(0,g.v_)(o.$t("keys.movexz")),1)]),(0,n.Lk)("div",ct,[t[4]||(t[4]=(0,n.Lk)("span",{class:"key"},"Q/E",-1)),(0,n.Lk)("span",dt,(0,g.v_)(o.$t("keys.updown")),1)]),(0,n.Lk)("div",ht,[t[5]||(t[5]=(0,n.Lk)("span",{class:"key"},"R",-1)),(0,n.Lk)("span",ut,(0,g.v_)(o.$t("keys.rotate")),1)]),(0,n.Lk)("div",kt,[t[6]||(t[6]=(0,n.Lk)("span",{class:"key"},"Esc",-1)),(0,n.Lk)("span",pt,(0,g.v_)(o.$t("keys.deselect")),1)]),(0,n.Lk)("div",mt,[t[7]||(t[7]=(0,n.Lk)("span",{class:"key"},"Del/D",-1)),(0,n.Lk)("span",wt,(0,g.v_)(o.$t("keys.delete")),1)])]),(0,n.Lk)("div",ft,[t[10]||(t[10]=(0,n.Lk)("h4",null,"Colors",-1)),(0,n.Lk)("div",gt,[t[9]||(t[9]=(0,n.Lk)("span",{class:"key"},"1/2/3",-1)),(0,n.Lk)("span",vt,(0,g.v_)(o.$t("keys.clearredgreen")),1)])]),(0,n.Lk)("div",yt,[t[17]||(t[17]=(0,n.Lk)("h4",null,"Creation",-1)),(0,n.Lk)("div",bt,[t[11]||(t[11]=(0,n.Lk)("span",{class:"key"},"W",-1)),(0,n.Lk)("span",Lt,(0,g.v_)(o.$t("tools.wall")),1)]),(0,n.Lk)("div",Ct,[t[12]||(t[12]=(0,n.Lk)("span",{class:"key"},"F",-1)),(0,n.Lk)("span",xt,(0,g.v_)(o.$t("tools.foundation")),1)]),(0,n.Lk)("div",Mt,[t[13]||(t[13]=(0,n.Lk)("span",{class:"key"},"P",-1)),(0,n.Lk)("span",$t,(0,g.v_)(o.$t("tools.platform")),1)]),(0,n.Lk)("div",Ft,[t[14]||(t[14]=(0,n.Lk)("span",{class:"key"},"H",-1)),(0,n.Lk)("span",jt,(0,g.v_)(o.$t("tools.platformhole")),1)]),(0,n.Lk)("div",It,[t[15]||(t[15]=(0,n.Lk)("span",{class:"key"},"O",-1)),(0,n.Lk)("span",Et,(0,g.v_)(o.$t("tools.door")),1)]),(0,n.Lk)("div",Pt,[t[16]||(t[16]=(0,n.Lk)("span",{class:"key"},"I",-1)),(0,n.Lk)("span",zt,(0,g.v_)(o.$t("tools.window")),1)])])])])):(0,n.Q3)("",!0)])),_:1})])}var Rt={name:"KeyHelper",data(){return{isOpen:!1}},methods:{toggle(){this.isOpen=!this.isOpen}}};const St=(0,l.A)(Rt,[["render",Ot],["__scopeId","data-v-8314d086"]]);var At=St;const Xt={class:"tool-bar"},_t=["title"],Bt={class:"tool-group"},Dt=["title"],Ht=["title"],Kt=["title"],Tt=["title"],Zt={class:"tool-group"},Nt=["title"],Ut=["title"],Wt=["title"],Yt={class:"tool-group"},Vt=["title"],Jt=["title"],qt=["title"],Qt=["title"],Gt={class:"tool-group"},oe=["title","disabled"],te=["title","disabled"],ee=["title","disabled"];function se(o,t,e,s,r,l){const i=(0,n.g2)("CursorIcon"),a=(0,n.g2)("FoundationIcon"),c=(0,n.g2)("PlatformIcon"),d=(0,n.g2)("PlatformHoleIcon"),h=(0,n.g2)("StairsIcon"),u=(0,n.g2)("WallIcon"),k=(0,n.g2)("WindowIcon"),p=(0,n.g2)("DoorIcon"),m=(0,n.g2)("RampIcon"),w=(0,n.g2)("SmallRoofIcon"),f=(0,n.g2)("LongRoofIcon");return(0,n.uX)(),(0,n.CE)("div",Xt,[(0,n.Lk)("button",{title:o.$t("tools.select"),onClick:t[0]||(t[0]=t=>o.$emit("tool","select")),class:(0,g.C4)(["tool-button",{selected:"select"===e.tool}])},[(0,n.bF)(i)],10,_t),(0,n.Lk)("div",Bt,[(0,n.Lk)("button",{title:o.$t("tools.foundation"),onClick:t[1]||(t[1]=t=>o.$emit("tool","foundation")),class:(0,g.C4)(["tool-button",{selected:"foundation"===e.tool}])},[(0,n.bF)(a)],10,Dt),(0,n.Lk)("button",{title:o.$t("tools.platform"),onClick:t[2]||(t[2]=t=>o.$emit("tool","platform")),class:(0,g.C4)(["tool-button",{selected:"platform"===e.tool}])},[(0,n.bF)(c)],10,Ht),(0,n.Lk)("button",{title:o.$t("tools.platformhole"),onClick:t[3]||(t[3]=t=>o.$emit("tool","platformhole")),class:(0,g.C4)(["tool-button",{selected:"platformhole"===e.tool}])},[(0,n.bF)(d)],10,Kt),(0,n.Lk)("button",{title:o.$t("tools.stairs"),onClick:t[4]||(t[4]=t=>o.$emit("tool","stairs")),class:(0,g.C4)(["tool-button",{selected:"stairs"===e.tool}])},[(0,n.bF)(h)],10,Tt)]),(0,n.Lk)("div",Zt,[(0,n.Lk)("button",{title:o.$t("tools.wall"),onClick:t[5]||(t[5]=t=>o.$emit("tool","wall")),class:(0,g.C4)(["tool-button",{selected:"wall"===e.tool}])},[(0,n.bF)(u)],10,Nt),(0,n.Lk)("button",{title:o.$t("tools.window"),onClick:t[6]||(t[6]=t=>o.$emit("tool","window")),class:(0,g.C4)(["tool-button",{selected:"window"===e.tool}])},[(0,n.bF)(k)],10,Ut),(0,n.Lk)("button",{title:o.$t("tools.door"),onClick:t[7]||(t[7]=t=>o.$emit("tool","door")),class:(0,g.C4)(["tool-button",{selected:"door"===e.tool}])},[(0,n.bF)(p)],10,Wt)]),(0,n.Lk)("div",Yt,[(0,n.Lk)("button",{title:o.$t("tools.rampup"),onClick:t[8]||(t[8]=t=>o.$emit("tool","rampup")),class:(0,g.C4)(["tool-button rampup",{selected:"rampup"===e.tool}])},[(0,n.bF)(m)],10,Vt),(0,n.Lk)("button",{title:o.$t("tools.rampdown"),onClick:t[9]||(t[9]=t=>o.$emit("tool","rampdown")),class:(0,g.C4)(["tool-button",{selected:"rampdown"===e.tool}])},[(0,n.bF)(m)],10,Jt),(0,n.Lk)("button",{title:o.$t("tools.smallroof"),onClick:t[10]||(t[10]=t=>o.$emit("tool","smallroof")),class:(0,g.C4)(["tool-button",{selected:"smallroof"===e.tool}])},[(0,n.bF)(w)],10,qt),(0,n.Lk)("button",{title:o.$t("tools.longroof"),onClick:t[11]||(t[11]=t=>o.$emit("tool","longroof")),class:(0,g.C4)(["tool-button",{selected:"longroof"===e.tool}])},[(0,n.bF)(f)],10,Qt)]),(0,n.Lk)("div",Gt,[(0,n.Lk)("button",{title:o.$t("tools.clear"),onClick:t[12]||(t[12]=t=>o.$emit("color","clear")),disabled:!e.selection,class:"tool-button button-clear"},null,8,oe),(0,n.Lk)("button",{title:o.$t("tools.green"),onClick:t[13]||(t[13]=t=>o.$emit("color","green")),disabled:!e.selection,class:"tool-button button-green"},null,8,te),(0,n.Lk)("button",{title:o.$t("tools.red"),onClick:t[14]||(t[14]=t=>o.$emit("color","red")),disabled:!e.selection,class:"tool-button button-red"},null,8,ee)])])}const ne={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function re(o,t){return(0,n.uX)(),(0,n.CE)("svg",ne,t[0]||(t[0]=[(0,n.Lk)("g",{style:{display:"inline",fill:"none",stroke:"#000","stroke-opacity":"1","stroke-width":"6.38646664","stroke-dasharray":"none"}},[(0,n.Lk)("path",{d:"m58.43 111.614 3.358 70.11-6.974 1.815-4.149-2.226-4.692-81.44 69.953-8.46 56.303 11.914-4.405 85.12-6.365 2.119 4.381-78.984L103.75 123.1l.876 87.487-8.155 2.699-6.064-3.68-1.877-87.228-37.992-13.19 4.317 74.81",style:{fill:"none",stroke:"#000","stroke-width":"6.38646664","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1","stroke-dasharray":"none"},transform:"matrix(.04143 0 0 .04143 -.292 -1.921)"}),(0,n.Lk)("path",{d:"m96.294 213.323-1.717-97.454-48.125-15.403M94.283 115.867l77.884-12.422M158.703 113.37l-3.559 74.376 6.71 2.779M120.66 120.24l-.355 46.001-5.7 1.284-4.792-1.886.234-43.885M115.14 167.709l.84-47.085",style:{fill:"none",stroke:"#000","stroke-width":"6.38646664","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1","stroke-dasharray":"none"},transform:"matrix(.04143 0 0 .04143 -.292 -1.921)"})],-1)]))}const le={},ie=(0,l.A)(le,[["render",re]]);var ae=ie;const ce={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function de(o,t){return(0,n.uX)(),(0,n.CE)("svg",ce,t[0]||(t[0]=[(0,n.Lk)("g",{style:{display:"inline",fill:"none",stroke:"#000","stroke-opacity":"1","stroke-width":"6.38646664","stroke-dasharray":"none"}},[(0,n.Lk)("path",{d:"m24.498 100.387.546 8.234 57.285 19.11 108.99-14.455.913-9.419-71.845-12.713z",style:{fill:"none",stroke:"#000","stroke-width":"6.38646664","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1","stroke-dasharray":"none"},transform:"matrix(.04143 0 0 .04143 -.01 -.172)"}),(0,n.Lk)("path",{d:"m24.889 101.024 56.528 16.254 110.97-13.354M81.884 127.703 81.5 117.14",style:{fill:"none",stroke:"#000","stroke-width":"6.38646664","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1","stroke-dasharray":"none"},transform:"matrix(.04143 0 0 .04143 -.01 -.172)"})],-1)]))}const he={},ue=(0,l.A)(he,[["render",de]]);var ke=ue;const pe={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function me(o,t){return(0,n.uX)(),(0,n.CE)("svg",pe,t[0]||(t[0]=[(0,n.Lk)("g",{style:{display:"inline",fill:"none",stroke:"#000","stroke-opacity":"1","stroke-width":"6.21314809","stroke-dasharray":"none"}},[(0,n.Lk)("path",{d:"m24.498 100.387.546 8.234 57.285 19.11 108.99-14.455.913-9.419-71.845-12.713z",style:{fill:"none",stroke:"#000","stroke-width":"6.21314809","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1","stroke-dasharray":"none"},transform:"matrix(.04258 -.0002 .0002 .04258 -.309 -.28)"}),(0,n.Lk)("path",{d:"m24.889 101.024 56.528 16.254 110.97-13.354M81.884 127.703 81.5 117.14",style:{fill:"none",stroke:"#000","stroke-width":"6.21314809","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1","stroke-dasharray":"none"},transform:"matrix(.04258 -.0002 .0002 .04258 -.309 -.28)"}),(0,n.Lk)("path",{d:"m72.273 108.188 21.209 5.608 84.483-10.381-24.734-4.487zM152.96 99.086l.166 7.247",style:{fill:"none",stroke:"#000","stroke-width":"6.38646575","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1","stroke-dasharray":"none"},transform:"matrix(.04143 0 0 .04143 -.197 -.16)"})],-1)]))}const we={},fe=(0,l.A)(we,[["render",me]]);var ge=fe;const ve={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function ye(o,t){return(0,n.uX)(),(0,n.CE)("svg",ve,t[0]||(t[0]=[(0,n.Lk)("g",{style:{display:"inline",fill:"none",stroke:"#000","stroke-opacity":"1","stroke-width":"4.28035139","stroke-dasharray":"none"}},[(0,n.Lk)("path",{d:"m97.645 125.376-28.75 2.801-10.337-7.534 26.61-2.218zM98.425 126.486l5.512 33.617-29.512 4.25-5.178-35.794",style:{fill:"none",stroke:"#000","stroke-width":"4.28035139","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1","stroke-dasharray":"none"},transform:"matrix(.06181 0 0 .06181 -1.44 -2.587)"}),(0,n.Lk)("path",{d:"m58.173 120.765.424 29.526 16.005 14.164M98.285 125.749l40.301-70.914-16.284-1.726-36.704 65.103",style:{fill:"none",stroke:"#000","stroke-width":"4.28035139","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1","stroke-dasharray":"none"},transform:"matrix(.06181 0 0 .06181 -1.44 -2.587)"})],-1)]))}const be={},Le=(0,l.A)(be,[["render",ye]]);var Ce=Le;const xe={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function Me(o,t){return(0,n.uX)(),(0,n.CE)("svg",xe,t[0]||(t[0]=[(0,n.Lk)("g",{style:{display:"inline"}},[(0,n.Lk)("path",{d:"m48.377 41.603 111.852 4.628-.117 111.479-111.415 4.345Z",style:{fill:"none",stroke:"#000","stroke-width":"6.38646664","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1","stroke-dasharray":"none"},transform:"matrix(.04143 0 0 .04143 -.09 -.129)"})],-1)]))}const $e={},Fe=(0,l.A)($e,[["render",Me]]);var je=Fe;const Ie={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function Ee(o,t){return(0,n.uX)(),(0,n.CE)("svg",Ie,t[0]||(t[0]=[(0,n.Lk)("g",{style:{display:"inline",fill:"none",stroke:"#000","stroke-opacity":"1","stroke-width":"6.38646664","stroke-dasharray":"none"}},[(0,n.Lk)("path",{d:"m48.377 41.603 111.852 4.628-.117 111.479-111.415 4.345Z",style:{display:"inline",fill:"none",stroke:"#000","stroke-width":"6.38646664","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1","stroke-dasharray":"none"},transform:"matrix(.04143 0 0 .04143 -.031 -.012)"}),(0,n.Lk)("path",{d:"m62.652 66.35.202 46.496 83.917-1.075-.32-44.055z",style:{fill:"none",stroke:"#000","stroke-width":"6.38646664","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1","stroke-dasharray":"none"},transform:"matrix(.04143 0 0 .04143 -.031 -.012)"})],-1)]))}const Pe={},ze=(0,l.A)(Pe,[["render",Ee]]);var Oe=ze;const Re={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function Se(o,t){return(0,n.uX)(),(0,n.CE)("svg",Re,t[0]||(t[0]=[(0,n.Lk)("g",{style:{fill:"none",stroke:"#000","stroke-opacity":"1","stroke-width":"6.38646664","stroke-dasharray":"none"}},[(0,n.Lk)("path",{d:"m49.029 41.736-.478 119.732 36.217-1.25.403-92.977 41.277.88.057 89.925 33.626-1.284-.263-110.367z",style:{fill:"none",stroke:"#000","stroke-width":"6.38646664","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1","stroke-dasharray":"none"},transform:"matrix(.04143 0 0 .04143 -.025 .005)"})],-1)]))}const Ae={},Xe=(0,l.A)(Ae,[["render",Se]]);var _e=Xe;const Be={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function De(o,t){return(0,n.uX)(),(0,n.CE)("svg",Be,t[0]||(t[0]=[(0,n.Lk)("g",{style:{display:"inline",fill:"none",stroke:"#000","stroke-opacity":"1","stroke-width":"6.38646664","stroke-dasharray":"none"}},[(0,n.Lk)("path",{d:"M118.038 95.787 21.77 152.166l3.205 3.359 55.16 13.817L191.223 96.88l-2.669-3.593Z",style:{fill:"none",stroke:"#000","stroke-width":"6.38646664","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1","stroke-dasharray":"none"},transform:"matrix(.04143 0 0 .04143 -.38 .877)"}),(0,n.Lk)("path",{d:"m188.504 93.434-112.27 71.847-54.589-13.015M76.723 165.483l3.051 4.095",style:{fill:"none",stroke:"#000","stroke-width":"6.38646664","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1","stroke-dasharray":"none"},transform:"matrix(.04143 0 0 .04143 -.38 .877)"})],-1)]))}const He={},Ke=(0,l.A)(He,[["render",De]]);var Te=Ke;const Ze={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function Ne(o,t){return(0,n.uX)(),(0,n.CE)("svg",Ze,t[0]||(t[0]=[(0,n.Lk)("g",{style:{display:"inline",fill:"none",stroke:"#000","stroke-opacity":"1","stroke-width":"6.38646664","stroke-dasharray":"none"}},[(0,n.Lk)("path",{d:"M73.144 55.293 31.72 149.792l47.759 13.649 5.647-.569 43.158-108.386 3.84.841 35.92 99.837 4.698-1.013-41.318-111.048-3.483-.291z",style:{fill:"none",stroke:"#000","stroke-width":"6.38646664","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1","stroke-dasharray":"none"},transform:"matrix(.04143 0 0 .04143 .125 -.098)"}),(0,n.Lk)("path",{d:"m100.551 124.15 8.444 20.122 59.53 10.836M127.907 43.127 79.494 163.579",style:{fill:"none",stroke:"#000","stroke-width":"6.38646664","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1","stroke-dasharray":"none"},transform:"matrix(.04143 0 0 .04143 .125 -.098)"})],-1)]))}const Ue={},We=(0,l.A)(Ue,[["render",Ne]]);var Ye=We;const Ve={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function Je(o,t){return(0,n.uX)(),(0,n.CE)("svg",Ve,t[0]||(t[0]=[(0,n.Lk)("g",{style:{display:"inline",fill:"none",stroke:"#000","stroke-opacity":"1","stroke-width":"6.38646664","stroke-dasharray":"none"}},[(0,n.Lk)("path",{d:"M111.086 55.485 30.4 146.887l2.583 2.536L79.24 163.55l93.302-115.859-2.913-3.29z",style:{fill:"none",stroke:"#000","stroke-width":"6.38646664","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1","stroke-dasharray":"none"},transform:"matrix(.04143 0 0 .04143 -.02 -.01)"}),(0,n.Lk)("path",{d:"M169.631 44.79 76.376 160.26 30.24 147.162M79.428 163.385l-2.946-3.254",style:{fill:"none",stroke:"#000","stroke-width":"6.38646664","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1","stroke-dasharray":"none"},transform:"matrix(.04143 0 0 .04143 -.02 -.01)"})],-1)]))}const qe={},Qe=(0,l.A)(qe,[["render",Je]]);var Ge=Qe,os={name:"ToolBar",emits:["tool","color"],components:{FoundationIcon:ae,PlatformIcon:ke,StairsIcon:Ce,PlatformHoleIcon:ge,WallIcon:je,DoorIcon:_e,RampIcon:Te,SmallRoofIcon:Ye,LongRoofIcon:Ge,WindowIcon:Oe,CursorIcon:q},props:{tool:{type:[String,null],required:!0},selection:{type:[Object,null],required:!0}}};const ts=(0,l.A)(os,[["render",se],["__scopeId","data-v-8e51187e"]]);var es=ts;const ss=o=>new Promise((t=>setTimeout(t,o))),ns=new f.B,rs=o=>JSON.parse(JSON.stringify(o)),ls=(o,t=!0)=>new Promise((e=>{ns.load("./glb/"+o+".glb",(o=>{const s=t?o.scene.children[0]:o.scene;e(s)}),void 0,(t=>{console.error("load error",o,t),e(null)}))})),is=o=>o instanceof p.B69&&(o.geometry&&o.geometry.dispose(),o.material&&(o.material instanceof Array?o.material.forEach((o=>o.dispose())):o.material.dispose()),o.removeFromParent(),!0),as=o=>new Promise((t=>{o.toBlob((o=>{const e=URL.createObjectURL(o);t(e)}))})),cs={foundation:.5,platform:-.55,platformhole:-.55,stairs:.5,wall:.5,window:.5,door:.5,rampup:.45,rampdown:-.05,longroof:.5,smallroof:.5},ds={scene:null,camera:null,renderer:null,grid:null,lgrid:null,controls:null,ambient:null,lights:{},models:{},materials:{},holo:null};var hs={name:"HomeView",components:{UiPanel:qo,KeyHelpmer:At,ToolBar:es},data(){return{cursor:[0,1,0],tool:"select",lock:null,selection:null,construction:{},hiddenFloors:[],holoR:0,cads:{}}},async created(){await ss(0),ds.scene=new p.Z58,ds.scene.background=new p.Q1f(6710886);const o=this.$refs.v3d.getBoundingClientRect();ds.camera=new p.ubm(50,o.width/o.height,.1,1e3),ds.camera.position.x=5,ds.camera.position.z=5,ds.camera.position.y=5,ds.camera.lookAt(new p.Pq0(0,0,0)),ds.renderer=new m.JeP({canvas:this.$refs.canvas,alpha:!0,antialias:!0}),ds.renderer.shadowMap.enabled=!0,ds.renderer.shadowMap.type=p.Wk7,ds.renderer.setSize(o.width,o.height),ds.renderer.setAnimationLoop((()=>this.animate())),ds.lgrid=new p.fTw(10,10,11184895,10066363),ds.scene.add(ds.lgrid),ds.controls=new w.N(ds.camera,this.$refs.canvas),ds.controls.target.set(0,0,0),ds.lights.ambient=new p.$p8(16777215,.6),ds.scene.add(ds.lights.ambient),ds.lights.hemi=new p.dth(14527231,5653317,.8),ds.scene.add(ds.lights.hemi),ds.lights.dir=new p.ZyN(16777215,2),ds.lights.dir.position.set(10,20,10),ds.lights.dir.castShadow=!0,ds.lights.dir.shadow.mapSize.width=2048,ds.lights.dir.shadow.mapSize.height=2048,ds.lights.dir.shadow.camera.near=.5,ds.lights.dir.shadow.camera.far=50,ds.lights.dir.shadow.camera.left=-20,ds.lights.dir.shadow.camera.right=20,ds.lights.dir.shadow.camera.top=20,ds.lights.dir.shadow.camera.bottom=-20,ds.scene.add(ds.lights.dir);const t=new p.bdM(1,1);ds.cursorMaterial=new p.V9B({color:1401481,side:p.$EB,transparent:!0,opacity:.9}),ds.cursor=new p.eaF(t,ds.cursorMaterial),ds.cursor.rotateX(Math.PI/2),ds.cursor.position.set(this.cursor[0]+.5,this.cursor[1]-1,this.cursor[2]+.5),ds.scene.add(ds.cursor),ds.bbox=new p.IWo,ds.bbox.renderOrder=1e3,ds.scene.add(ds.bbox);const e=new p.bdM(100,100);ds.mplane=new p.eaF(e,ds.cursorMaterial),ds.mplane.layers.set(2),ds.mplane.rotateX(Math.PI/2),ds.scene.add(ds.mplane),await this.loadModels(),await this.loadCads(),ds.materials.wood=new p._4j({color:10387811,transparent:!0}),ds.materials.gray=new p._4j({color:5131854,transparent:!0}),ds.materials.red=new p._4j({color:10374734,transparent:!0}),ds.materials.green=new p._4j({color:5152334,transparent:!0}),ds.raycaster=new p.tBo},mounted(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("resize",this.onWindowResize)},beforeUnmount(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("resize",this.onWindowResize)},methods:{onWindowResize(){const o=this.$refs.v3d.getBoundingClientRect();ds.renderer.setSize(o.width,o.height),ds.camera.aspect=o.width/o.height,ds.camera.updateProjectionMatrix()},onKeyDown(o){if("INPUT"===o.target.tagName||"TEXTAREA"===o.target.tagName)return;const t=["Delete","Backspace"];switch(t.includes(o.code)&&o.preventDefault(),o.code){case"Delete":case"Backspace":case"KeyD":this.removeSelection();break;case"KeyR":this.rotateSelection();break;case"Escape":ds.holo?this.onTool("select"):this.onDeselect();break;case"ArrowUp":this.moveCursor(0,0,-1);break;case"ArrowDown":this.moveCursor(0,0,1);break;case"ArrowLeft":this.moveCursor(-1,0,0);break;case"ArrowRight":this.moveCursor(1,0,0);break;case"KeyQ":this.moveCursor(0,1,0);break;case"KeyE":this.moveCursor(0,-1,0);break;case"Digit1":this.setColor("clear");break;case"Digit2":this.setColor("red");break;case"Digit3":this.setColor("green");break;case"KeyW":this.onTool("wall");break;case"KeyF":this.onTool("foundation");break;case"KeyP":this.onTool("platform");break;case"KeyH":this.onTool("platformhole");break;case"KeyO":this.onTool("door");break;case"KeyI":this.onTool("window");break;case"KeyC":(o.ctrlKey||o.metaKey)&&(o.preventDefault(),this.save());break;case"KeyL":(o.ctrlKey||o.metaKey)&&(o.preventDefault(),this.$refs.uiPanel.$refs.fileInput.click());break}},moveCursor(o,t,e){const s=[this.cursor[0]+o,this.cursor[1]+t,this.cursor[2]+e];this.updateCursor(s)},animate(){ds.controls.update(),ds.renderer.render(ds.scene,ds.camera)},async loadModels(){const o=await ls("modulus",!1);ds.models["foundation"]=o.children.find((o=>"foundation"===o.name)),ds.models["door"]=o.children.find((o=>"door"===o.name)),ds.models["window"]=o.children.find((o=>"window"===o.name)),ds.models["wall"]=o.children.find((o=>"wall"===o.name)),ds.models["longroof"]=o.children.find((o=>"roof_long"===o.name)),ds.models["smallroof"]=o.children.find((o=>"roof_short"===o.name)),ds.models["platform"]=o.children.find((o=>"platform"===o.name)),ds.models["platformhole"]=o.children.find((o=>"hatch"===o.name)),ds.models["ramp"]=o.children.find((o=>"ramp"===o.name)),ds.models["stairs"]=o.children.find((o=>"stairs"===o.name)),console.log(ds.models)},async loadModel(o,t){const e=await ls(o);ds.models[t||o]=e},async loadCads(){this.cads.foundation=await this.loadCad("foundation"),this.cads.platform=await this.loadCad("platform"),this.cads.platformhole=await this.loadCad("platformhole"),this.cads.wall=await this.loadCad("wall"),this.cads.door=await this.loadCad("door"),this.cads.window=await this.loadCad("window"),this.cads.stairs=await this.loadCad("stairs"),this.cads.longroof=await this.loadCad("longroof"),this.cads.smallroof=await this.loadCad("smallroof"),this.cads.rampup=await this.loadCad("rampup"),this.cads.rampdown=await this.loadCad("rampdown")},loadCad(o){const t=document.createElement("img");return t.width=128,t.height=128,new Promise((e=>{t.onload=()=>{e(t)},t.src="./svg/cad-"+o+".svg"}))},updateCursor(o){this.cursor=o,ds.cursor.position.set(this.cursor[0]+.5,this.cursor[1]-.999,this.cursor[2]+.5),ds.lgrid.position.y=this.cursor[1]-1,ds.mplane.position.y=this.cursor[1]-1,ds.holo&&this.spMesh(ds.holo,this.tool,0,!1)},addPart(o,t=0,e=!0){const s=["rampup","rampdown"].includes(o)?"ramp":o;if(!ds.models[s])return;const n=this.getPart(s);["wall","door","window"].includes(o)&&n.rotateY(-Math.PI),this.spMesh(n,o),n.castShadow=!0,n.receiveShadow=!0,ds.scene.add(n);for(let r=t;r>0;r--)n.rotateY(Math.PI/2);return this.construction[n.uuid]={part:o,position:[...this.cursor],rotation:t,color:"clear"},e?(this.selection=n,ds.bbox.setFromObject(this.selection),ds.bbox.visible=!0,this.lock=[...this.cursor],n):n},spMesh(o,t,e=0,s=!0){s&&o.scale.set(.5,.5,.5),cs[t]&&(e+=cs[t]),o.position.set(this.cursor[0]+.5,this.cursor[1]-1.5+e,this.cursor[2]+.5)},rotateSelection(){if(ds.holo)return ds.holo.rotateY(Math.PI/2),this.holoR++,void(this.holoR>=4&&(this.holoR-=4));this.selection&&(this.selection.rotateY(Math.PI/2),this.construction[this.selection.uuid].rotation++,this.construction[this.selection.uuid].rotation>=4&&(this.construction[this.selection.uuid].rotation-=4),ds.bbox.update())},removeSelection(){this.selection&&(delete this.construction[this.selection.uuid],this.selection.removeFromParent(),this.selection=null,ds.bbox.visible=!1)},onDeselect(){this.selection=null,ds.bbox.visible=!1,this.lock=null},onTool(o){const t=this.tool;if(this.tool===o){if("select"===o)return;return this.onTool("select")}if(this.tool=o,this.onDeselect(),"select"===this.tool)return ds.holo&&(is(ds.holo),ds.holo=null,this.holoR=0),void(ds.cursor.visible=!0);const e="rampup"===this.tool||"rampdown"===this.tool?"ramp":this.tool;if(ds.models[e]){if(ds.cursor.visible=!1,ds.holo&&is(ds.holo),console.log("clone mod",e,ds.models[e]),ds.holo=this.getPart(e,ds.cursorMaterial),["wall","window","door"].includes(e)&&ds.holo.rotateY(-Math.PI),"select"===t)this.holoR=0;else for(let o=this.holoR;o>0;o--)ds.holo.rotateY(Math.PI/2);this.spMesh(ds.holo,this.tool,-1),ds.scene.add(ds.holo)}else console.warn("unknown tool",e)},getPart(o,t=null){let e=null;if("smallroof"===o||"longroof"===o){const s=ds.models[o].children[0].geometry.clone(),n=ds.models[o].children[1].geometry.clone();e=new p.YJl;const r=t?t.clone():ds.models[o].children[0].material.clone(),l=t?t.clone():ds.models[o].children[1].material.clone();t||(r.transparent=!0,l.transparent=!0);const i=new p.eaF(s,r),a=new p.eaF(n,l);t||(i.layers.enable(1),a.layers.enable(1)),e.add(i),e.add(a)}else{const s=ds.models[o].geometry.clone(),n=t?t.clone():ds.models[o].material.clone();t||(n.transparent=!0),e=new p.eaF(s,n),t||e.layers.enable(1)}return e},onClick(o){if(ds.holo)return void this.addPart(this.tool,this.holoR,!1);ds.raycaster.layers.set(1);const t=new p.I9Y;t.x=o.clientX/window.innerWidth*2-1,t.y=-o.clientY/window.innerHeight*2+1,ds.raycaster.setFromCamera(t,ds.camera);const e=ds.raycaster.intersectObjects(ds.scene.children);e[0]&&e[0].object&&(this.selection&&e[0].object.uuid===this.selection.uuid?this.onDeselect():(this.selection=e[0].object,ds.bbox.setFromObject(this.selection),ds.bbox.visible=!0))},onMove(o){if(this.lock||!ds.raycaster)return;ds.raycaster.layers.set(2);const t=new p.I9Y;t.x=o.clientX/window.innerWidth*2-1,t.y=-o.clientY/window.innerHeight*2+1,ds.raycaster.setFromCamera(t,ds.camera);const e=ds.raycaster.intersectObjects(ds.scene.children);if(e[0]){const o=e[0].point,t=[...this.cursor];this.updateCursor([Math.floor(o.x),t[1],Math.floor(o.z)])}},setColor(o){if(!this.selection)return;const t=this.selection.material;t.emissiveIntensity="clear"===o?0:.1,"green"===o&&(t.emissive=new p.Q1f(65280)),"red"===o&&(t.emissive=new p.Q1f(16711680)),this.construction[this.selection.uuid].color=o},toggleFloor(o){this.hiddenFloors.includes(o)?this.hiddenFloors=this.hiddenFloors.filter((t=>t!==o)):this.hiddenFloors.push(o),this.setFloors()},setFloors(){Object.keys(this.construction).forEach((o=>{const t=this.construction[o],e=t.position[1],s=ds.scene.getObjectByProperty("uuid",o);s&&(this.hiddenFloors.includes(e)?(s.layers.disable(1),s.material.opacity=.05):(s.layers.enable(1),s.material.opacity=1))}))},save(){const o={type:"construction/freedom",version:1,construction:rs(this.construction),floors:rs(this.hiddenFloors)},t=JSON.stringify(o),e=new Blob([t],{type:"text/plain"}),s=URL.createObjectURL(e),n=document.createElement("a");n.href=s,n.download="construction.json",n.click()},async loadFile(o){const t=await o.text();let e=null;try{e=JSON.parse(t)}catch(s){console.error("read file",s),e=null}e&&("construction/freedom"===e.type&&1===e.version?(this.reset(),Object.values(e.construction).forEach((o=>{this.updateCursor(o.position),this.addPart(o.part,o.rotation),this.setColor(o.color)})),this.hiddenFloors=[...e.floors],this.setFloors()):console.error("format not supported"))},reset(){this.onDeselect(),this.selection=null,Object.keys(this.construction).forEach((o=>{const t=ds.scene.getObjectByProperty("uuid",o);t&&t.removeFromParent()})),this.updateCursor([0,1,0])},async cad(){const o={x:null,y:null,z:null,layers:{}};Object.values(this.construction).forEach((t=>{o.x||(o.x={min:t.position[0],max:t.position[0]}),o.y||(o.y={min:t.position[1],max:t.position[1]}),o.z||(o.z={min:t.position[2],max:t.position[2]}),o.x.min=Math.min(o.x.min,t.position[0]),o.x.max=Math.max(o.x.max,t.position[0]),o.y.min=Math.min(o.y.min,t.position[1]),o.y.max=Math.max(o.y.max,t.position[1]),o.z.min=Math.min(o.z.min,t.position[2]),o.z.max=Math.max(o.z.max,t.position[2]),o.layers[`l${t.position[1]}`]||(o.layers[`l${t.position[1]}`]=[]),o.layers[`l${t.position[1]}`].push(t)})),console.log("CAD",o);const t={door:3,wall:3,window:3},e=o.x.max-o.x.min+3,s=o.z.max-o.z.min+3,n=[];for(let l=o.y.min;l<=o.y.max;l++){const r=document.createElement("canvas");r.width=128*e,r.height=128*s;const i=r.getContext("2d");Object.values(this.construction).forEach((e=>{if(e.position[1]!==l)return;if(!this.cads[e.part])return;const s=128*(e.position[0]-o.x.min+1),n=128*(e.position[2]-o.z.min+1);i.translate(s+64,n+64);const r=t[e.part]||0;for(let o=0;o<=e.rotation+r;o++)i.rotate(-Math.PI/2);console.log("draw at",e.part,e.color,s,n),i.drawImage(this.cads[e.part],-64,-64),"green"===e.color&&(i.fillStyle="#00FF0033",i.fillRect(-64,-64,128,128)),"red"===e.color&&(i.fillStyle="#FF000033",i.fillRect(-64,-64,128,128)),i.fillStyle="#FFFFFF",i.setTransform(1,0,0,1,0,0)})),i.fillStyle="#000000",i.font="32px monospace",i.fillText(this.$t("ui.floor",{num:l}),64,64),n.push(r)}const r=await Promise.all(n.map((o=>as(o))));r.forEach((o=>window.open(o,"_blank"))),console.log("floors",n,r)}},watch:{layer(o){ds.lgrid.position.y=o-1}}};const us=(0,l.A)(hs,[["render",k]]);var ks=us;const ps=[{path:"/",name:"home",component:ks}],ms=(0,d.aE)({history:(0,d.LA)("/dayz-freedom-calculator/"),routes:ps});var ws=ms,fs=e(591),gs=(0,fs.y$)({state:{},getters:{},mutations:{},actions:{},modules:{}}),vs=e(3275),ys=JSON.parse('{"lang":{"en":"En","ru":"Ru","ukr":"Ukr"},"keys":{"button":"Hot Keys","hide":"Hide","saveload":"Save/Load","save":"save","load":"load","navigation":"Navigation","movexz":"move X/Z","updown":"up/down Y","rotate":"rotate","deselect":"deselect","delete":"delete","colors":"Colors","clearredgreen":"clear/red/green","creation":"Creation"},"tools":{"select":"Select","foundation":"Foundation","platform":"Platform","platformhole":"Hatch Platform","stairs":"Stairs","wall":"Wall","window":"Window","door":"Door","rampup":"Ramp Up","rampdown":"Ramp Down","smallroof":"Small Roof","longroof":"Long Roof","clear":"Clear","red":"Red","green":"Green"},"ui":{"floor":"{num} floor","floors":"Show/hide floors","cad":"2D Plans","planks":"Planks","nails":"Nails","codelocks":"Codelocks","wpup":"Working plane up","wpdown":"Working plane down","position":"Position X/Y/Z","save":"Save to file","load":"Load from file","reset":"New","lang":"Locale"}}'),bs=JSON.parse('{"lang":{"en":"Англ","ru":"Ру","ukr":"Укр"},"keys":{"button":"Горячие клавиши","hide":"Скрыть","saveload":"Сохранить/Загрузить","save":"сохранить","load":"загрузить","navigation":"Навигация","movexz":"в плоскости X/Z","updown":"вверх/вниз Y","rotate":"повернуть","deselect":"снять выделение","delete":"удалить","colors":"Подсветка","clearredgreen":"очистить/красный/зеленый","creation":"Создание"},"tools":{"select":"выделение","foundation":"Основание","platform":"Платформа","platformhole":"Платформа с люком","stairs":"Ступени","wall":"Стена","window":"Окно","door":"Дверь","rampup":"Рампа сверху","rampdown":"Рампа снизу","smallroof":"Двухскатная крыша","longroof":"Односкатная крыша","clear":"Без подсветки","red":"Красный","green":"Зелёный"},"ui":{"floor":"{num} этаж","floors":"Показать/скрыть этажи","cad":"2Д планы","planks":"Доски","nails":"Гвозди","codelocks":"Кодлоки","wpup":"Рабочая плоскость - вверх","wpdown":"Рабочая плоскость - вниз","position":"Позиция X/Y/Z","save":"Сохранить в файл","load":"Загрузить из файла","reset":"Новый","lang":"Язык"}}'),Ls=JSON.parse('{"lang":{"en":"Англ","ru":"Рос","ukr":"Укр"},"keys":{"button":"Гарячі клавіші","hide":"Сховати","saveload":"Зберегти/Завантажити","save":"зберегти","load":"завантажити","navigation":"Навігація","movexz":"рух X/Z","updown":"вгору/вниз Y","rotate":"обернути","deselect":"зняти виділення","delete":"видалити","colors":"Підсвітка","clearredgreen":"очистити/червоний/зелений","creation":"Створення"},"tools":{"select":"Виділення","foundation":"Фундамент","platform":"Платформа","platformhole":"Платформа з люком","stairs":"Сходи","wall":"Стіна","window":"Вікно","door":"Двері","rampup":"Пандус вгору","rampdown":"Пандус вниз","smallroof":"Двосхилий дах","longroof":"Односхилий дах","clear":"Без підсвітки","red":"Червоний","green":"Зелений"},"ui":{"floor":"{num} поверх","floors":"Показати/сховати поверхи","cad":"2D плани","planks":"Дошки","nails":"Цвяхи","codelocks":"Кодові замки","wpup":"Робоча площина вгору","wpdown":"Робоча площина вниз","position":"Позиція X/Y/Z","save":"Зберегти у файл","load":"Завантажити з файлу","reset":"Новий","lang":"Мова"}}');const Cs=()=>navigator.userLanguage||navigator.languages&&navigator.languages.length&&navigator.languages[0]||navigator.language||navigator.browserLanguage||navigator.systemLanguage||"en",xs=Cs(),Ms=xs.includes("-")?xs.split("-")[0]:xs,$s=localStorage.getItem("locale")||Ms||"en",Fs=["en","ru","ukr"],js=Fs.includes($s)?$s:"en",Is=(0,vs.hU)({locale:js,fallbackLocale:"en",messages:{en:ys,ru:bs,ukr:Ls}});(0,s.Ef)(c).use(Is).use(gs).use(ws).mount("#app")}},t={};function e(s){var n=t[s];if(void 0!==n)return n.exports;var r=t[s]={exports:{}};return o[s].call(r.exports,r,r.exports,e),r.exports}e.m=o,function(){var o=[];e.O=function(t,s,n,r){if(!s){var l=1/0;for(d=0;d<o.length;d++){s=o[d][0],n=o[d][1],r=o[d][2];for(var i=!0,a=0;a<s.length;a++)(!1&r||l>=r)&&Object.keys(e.O).every((function(o){return e.O[o](s[a])}))?s.splice(a--,1):(i=!1,r<l&&(l=r));if(i){o.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}r=r||0;for(var d=o.length;d>0&&o[d-1][2]>r;d--)o[d]=o[d-1];o[d]=[s,n,r]}}(),function(){e.n=function(o){var t=o&&o.__esModule?function(){return o["default"]}:function(){return o};return e.d(t,{a:t}),t}}(),function(){e.d=function(o,t){for(var s in t)e.o(t,s)&&!e.o(o,s)&&Object.defineProperty(o,s,{enumerable:!0,get:t[s]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(o){if("object"===typeof window)return window}}()}(),function(){e.o=function(o,t){return Object.prototype.hasOwnProperty.call(o,t)}}(),function(){var o={524:0};e.O.j=function(t){return 0===o[t]};var t=function(t,s){var n,r,l=s[0],i=s[1],a=s[2],c=0;if(l.some((function(t){return 0!==o[t]}))){for(n in i)e.o(i,n)&&(e.m[n]=i[n]);if(a)var d=a(e)}for(t&&t(s);c<l.length;c++)r=l[c],e.o(o,r)&&o[r]&&o[r][0](),o[r]=0;return e.O(d)},s=self["webpackChunkhcalc"]=self["webpackChunkhcalc"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=e.O(void 0,[504],(function(){return e(1892)}));s=e.O(s)})();
//# sourceMappingURL=app.92de67bb.js.map
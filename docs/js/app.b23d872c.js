(function(){"use strict";var e={2165:function(e,s,t){var o=t(5130),n=t(6768);function r(e,s){const t=(0,n.g2)("router-view");return(0,n.uX)(),(0,n.Wv)(t)}var a=t(1241);const i={},l=(0,a.A)(i,[["render",r]]);var c=l,d=t(1387);const u={class:"home wh-100"},p={class:"view-3d wh-100 position-relative",ref:"v3d"};function h(e,s,t,o,r,a){const i=(0,n.g2)("UiPanel"),l=(0,n.g2)("KeyHelpmer");return(0,n.uX)(),(0,n.CE)("div",u,[(0,n.Lk)("div",p,[(0,n.Lk)("canvas",{onClick:s[0]||(s[0]=(...e)=>a.onClick&&a.onClick(...e)),ref:"canvas",onMousemove:s[1]||(s[1]=(...e)=>a.onMove&&a.onMove(...e))},null,544),(0,n.bF)(i,{construction:r.construction,selected:r.selection?r.selection.uuid:null,onRemove:a.removeSelection,onRotate:a.rotateSelection,onDeselect:a.onDeselect,onAddPart:a.addPart,cursor:r.cursor,onColor:a.setColor,onSave:a.save,onLoadFile:a.loadFile,onToggleFloor:a.toggleFloor,onUpdatePos:a.updateCursor,ref:"uiPanel"},null,8,["construction","selected","onRemove","onRotate","onDeselect","onAddPart","cursor","onColor","onSave","onLoadFile","onToggleFloor","onUpdatePos"]),(0,n.bF)(l)],512)])}t(4114),t(8111),t(2489),t(7588);var k=t(8371),b=t(8776),m=t(2951),y=t(1353),v=t(4232);const w={class:"ui-panel card col-auto m-2 position-absolute end-0 top-0"},g={class:"card-body"},f={class:"mb-2 input-group"},L=["disabled"],C=["disabled"],P={class:"d-flex flex-row"},F={class:"mb-2 me-1 input-group"},x=["disabled"],O=["disabled"],$={class:"mb-2 input-group"},j=["disabled"],E=["disabled"],M={class:"btn-group-vertical w-100",role:"group"},D={class:"btn-group w-100"},S={class:"btn-group w-100"},K={class:"btn-group w-100"},z={class:"btn-group w-100"},W={class:"btn-group w-100"},_={class:"btn-group-vertical w-100",role:"group"},R={class:"btn-group"},A=["disabled"],I=["disabled"],X=["disabled"],U={class:"btn-group"},B=["disabled"],H=["disabled"],N=["disabled"],T=["checked","onClick"],J={class:"mb-2"},Y={class:"btn-group"},Q={for:"load-file",class:"btn btn-outline-secondary"};function q(e,s,t,r,a,i){return(0,n.uX)(),(0,n.CE)("div",w,[(0,n.Lk)("div",g,[s[39]||(s[39]=(0,n.Lk)("h5",{class:"card-title"},"Position",-1)),(0,n.Lk)("div",f,[s[28]||(s[28]=(0,n.Lk)("label",{class:"input-group-text"},"Floor",-1)),(0,n.Lk)("button",{onClick:s[0]||(s[0]=e=>a.cpos.y--),disabled:a.cpos.y<=-5,class:"btn btn-outline-secondary"}," - ",8,L),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":s[1]||(s[1]=e=>a.cpos.y=e),type:"number",min:"-5",max:"5",step:"1",class:"form-control"},null,512),[[o.Jo,a.cpos.y]]),(0,n.Lk)("button",{onClick:s[2]||(s[2]=e=>a.cpos.y++),disabled:a.cpos.y>=5,class:"btn btn-outline-secondary"}," + ",8,C)]),(0,n.Lk)("div",P,[(0,n.Lk)("div",F,[s[29]||(s[29]=(0,n.Lk)("label",{class:"input-group-text"},"X",-1)),(0,n.Lk)("button",{onClick:s[3]||(s[3]=e=>a.cpos.x--),disabled:a.cpos.x<=-5,class:"btn btn-outline-secondary"}," - ",8,x),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":s[4]||(s[4]=e=>a.cpos.x=e),type:"number",min:"-5",max:"10",step:"1",class:"form-control"},null,512),[[o.Jo,a.cpos.x]]),(0,n.Lk)("button",{onClick:s[5]||(s[5]=e=>a.cpos.x++),disabled:a.cpos.x>=5,class:"btn btn-outline-secondary"}," + ",8,O)]),(0,n.Lk)("div",$,[s[30]||(s[30]=(0,n.Lk)("label",{class:"input-group-text"},"Y",-1)),(0,n.Lk)("button",{onClick:s[6]||(s[6]=e=>a.cpos.z--),disabled:a.cpos.z<=-5,class:"btn btn-outline-secondary"}," - ",8,j),(0,n.bo)((0,n.Lk)("input",{"onUpdate:modelValue":s[7]||(s[7]=e=>a.cpos.z=e),type:"number",min:"-5",max:"5",step:"1",class:"form-control"},null,512),[[o.Jo,a.cpos.z]]),(0,n.Lk)("button",{onClick:s[8]||(s[8]=e=>a.cpos.z++),disabled:a.cpos.z>=5,class:"btn btn-outline-secondary"}," + ",8,E)])]),s[40]||(s[40]=(0,n.Lk)("h5",{class:"card-title"},"Spawn",-1)),(0,n.Lk)("div",M,[(0,n.Lk)("div",D,[(0,n.Lk)("button",{onClick:s[9]||(s[9]=s=>e.$emit("addPart","foundation")),class:"w-50 btn btn-outline-secondary"}," Foundation "),(0,n.Lk)("button",{onClick:s[10]||(s[10]=s=>e.$emit("addPart","wall")),class:"w-50 btn btn-outline-secondary"}," Wall ")]),(0,n.Lk)("div",S,[(0,n.Lk)("button",{onClick:s[11]||(s[11]=s=>e.$emit("addPart","door")),class:"w-50 btn btn-outline-secondary"}," Door wall "),(0,n.Lk)("button",{onClick:s[12]||(s[12]=s=>e.$emit("addPart","window")),class:"w-50 btn btn-outline-secondary"}," Window wall ")]),(0,n.Lk)("div",K,[(0,n.Lk)("button",{onClick:s[13]||(s[13]=s=>e.$emit("addPart","platform")),class:"w-50 btn btn-outline-secondary"}," Platform "),(0,n.Lk)("button",{onClick:s[14]||(s[14]=s=>e.$emit("addPart","platformhole")),class:"w-50 btn btn-outline-secondary"}," Hatch platform ")]),(0,n.Lk)("div",z,[(0,n.Lk)("button",{onClick:s[15]||(s[15]=s=>e.$emit("addPart","stairs")),class:"col-4 btn btn-outline-secondary"}," Stairs "),(0,n.Lk)("button",{onClick:s[16]||(s[16]=s=>e.$emit("addPart","rampup")),class:"col-4 btn btn-outline-secondary"}," Car ramp up "),(0,n.Lk)("button",{onClick:s[17]||(s[17]=s=>e.$emit("addPart","rampdown")),class:"col-4 btn btn-outline-secondary"}," Car ramp down ")]),(0,n.Lk)("div",W,[(0,n.Lk)("button",{onClick:s[18]||(s[18]=s=>e.$emit("addPart","loongroof")),class:"w-50 btn btn-outline-secondary"}," Long roof "),(0,n.Lk)("button",{onClick:s[19]||(s[19]=s=>e.$emit("addPart","smallroof")),class:"w-50 btn btn-outline-secondary"}," Small roof ")])]),s[41]||(s[41]=(0,n.Lk)("h5",{class:"card-title mt-2"},"Control",-1)),(0,n.Lk)("div",_,[(0,n.Lk)("div",R,[(0,n.Lk)("button",{disabled:!t.selected,class:"col-4 btn btn-outline-secondary",onClick:s[20]||(s[20]=s=>e.$emit("color","clear"))}," Clear ",8,A),(0,n.Lk)("button",{disabled:!t.selected,class:"col-4 btn btn-outline-secondary",onClick:s[21]||(s[21]=s=>e.$emit("color","green"))}," Green ",8,I),(0,n.Lk)("button",{disabled:!t.selected,class:"col-4 btn btn-outline-secondary",onClick:s[22]||(s[22]=s=>e.$emit("color","red"))}," Red ",8,X)]),(0,n.Lk)("div",U,[(0,n.Lk)("button",{disabled:!t.selected,class:"col-4 btn btn-outline-secondary mb-2",onClick:s[23]||(s[23]=s=>e.$emit("rotate"))}," Rotate ",8,B),(0,n.Lk)("button",{disabled:!t.selected,class:"col-4 btn btn-outline-secondary mb-2",onClick:s[24]||(s[24]=s=>e.$emit("deselect"))}," Deselect ",8,H),(0,n.Lk)("button",{disabled:!t.selected,class:"col-4 btn btn-outline-secondary mb-2",onClick:s[25]||(s[25]=s=>e.$emit("remove"))}," Remove ",8,N)])]),s[42]||(s[42]=(0,n.Lk)("h5",{class:"card-title mt-2"},"Floors",-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(i.layers,(s=>((0,n.uX)(),(0,n.CE)("div",{class:"mb-2",key:s},[(0,n.Lk)("input",{type:"checkbox",checked:!t.floors.includes(s),onClick:t=>e.$emit("toggleFloor",s)},null,8,T),(0,n.eW)(" "+(0,v.v_)(s),1)])))),128)),s[43]||(s[43]=(0,n.Lk)("h5",{class:"card-title mt-2"},"Construction",-1)),(0,n.Lk)("div",J,[(0,n.eW)(" Total: "+(0,v.v_)(i.parts),1),s[31]||(s[31]=(0,n.Lk)("br",null,null,-1)),(0,n.eW)(" woods: "+(0,v.v_)(i.resources.woods),1),s[32]||(s[32]=(0,n.Lk)("br",null,null,-1)),(0,n.eW)(" planks: "+(0,v.v_)(i.resources.planks)+" ("+(0,v.v_)(i.ceil(i.resources.planks,252))+")",1),s[33]||(s[33]=(0,n.Lk)("br",null,null,-1)),(0,n.eW)(" nails: "+(0,v.v_)(i.resources.nails)+" ("+(0,v.v_)(i.ceil(i.resources.nails,70))+")",1),s[34]||(s[34]=(0,n.Lk)("br",null,null,-1)),(0,n.eW)(" metal: "+(0,v.v_)(i.resources.metal),1),s[35]||(s[35]=(0,n.Lk)("br",null,null,-1)),(0,n.eW)(" wires: "+(0,v.v_)(i.resources.wires),1),s[36]||(s[36]=(0,n.Lk)("br",null,null,-1)),(0,n.eW)(" codelocks:"+(0,v.v_)(i.resources.codelocks),1),s[37]||(s[37]=(0,n.Lk)("br",null,null,-1))]),(0,n.Lk)("div",Y,[(0,n.Lk)("button",{onClick:s[26]||(s[26]=s=>e.$emit("save")),class:"btn btn-outline-secondary"}," Save "),(0,n.Lk)("label",Q,[s[38]||(s[38]=(0,n.eW)(" Load ")),(0,n.Lk)("input",{type:"file",id:"load-file",class:"d-none",accept:".json",ref:"fileInput",onChange:s[27]||(s[27]=s=>e.$emit("loadFile",s.target.files[0]))},null,544)])])]),s[44]||(s[44]=(0,n.Lk)("div",{class:"text-muted"},[(0,n.Lk)("small",null," abrakadobr 2025 for FREEDOM DayZ ")],-1))])}var V={name:"UiPanel",emits:["addPart","updatePos","remove","deselect","color","toggleFloor","save","loadFile"],props:{cursor:{type:Array,required:!0,default:()=>[0,1,0]},selected:{type:[String,null,void 0],required:!1},construction:{type:[Object,null],required:!1,default:()=>({})},floors:{type:[Array,null,void 0],required:!1,default:()=>[]}},data(){return{cpos:{x:this.cursor[0],y:this.cursor[1],z:this.cursor[2]}}},watch:{cursor:{deep:!0,handler(e){e[0]!==this.cpos.x&&(this.cpos.x=e[0]),e[1]!==this.cpos.y&&(this.cpos.y=e[1]),e[2]!==this.cpos.z&&(this.cpos.z=e[2])}},cpos:{deep:!0,handler(e){e.x===this.cursor[0]&&e.y===this.cursor[1]&&e.z===this.cursor[2]||this.$emit("updatePos",[e.x,e.y,e.z])}}},computed:{parts(){return Object.keys(this.construction).length},resources(){const e={nails:0,planks:0,woods:0,metal:0,wires:0,codelocks:0};return Object.values(this.construction).forEach((s=>{"door"===s.part?(e.nails+=28,e.planks+=8,e.woods+=2,e.metal+=2,e.wires+=1,e.codelocks+=1):(e.nails+=20,e.planks+=10)})),e},layers(){const e=[];return Object.values(this.construction).forEach((s=>{const t=s.position[1];e.includes(t)||e.push(t)})),e}},methods:{ceil(e,s){return Math.ceil(e/s)},toggleFloor(e){this.$emit("toggleFloor",e)}}};const Z=(0,a.A)(V,[["render",q]]);var G=Z;const ee={class:"key-helper"},se={key:0,class:"helper-content"};function te(e,s,t,r,a,i){return(0,n.uX)(),(0,n.CE)("div",ee,[(0,n.Lk)("button",{onClick:s[0]||(s[0]=(...e)=>i.toggle&&i.toggle(...e)),class:"helper-toggle"},(0,v.v_)(a.isOpen?"Hide":"Keys"),1),(0,n.bF)(o.eB,{name:"slide"},{default:(0,n.k6)((()=>[a.isOpen?((0,n.uX)(),(0,n.CE)("div",se,s[1]||(s[1]=[(0,n.Lk)("div",{class:"keys-vertical"},[(0,n.Lk)("div",{class:"key-section"},[(0,n.Lk)("h4",null,"Save/Load"),(0,n.Lk)("div",{class:"key-group"},[(0,n.Lk)("span",{class:"key"},"Ctrl+C"),(0,n.Lk)("span",{class:"desc"},"save")]),(0,n.Lk)("div",{class:"key-group"},[(0,n.Lk)("span",{class:"key"},"Ctrl+L"),(0,n.Lk)("span",{class:"desc"},"load")])]),(0,n.Lk)("div",{class:"key-section"},[(0,n.Lk)("h4",null,"Navigation"),(0,n.Lk)("div",{class:"key-group"},[(0,n.Lk)("span",{class:"key"},"↑↓←→"),(0,n.Lk)("span",{class:"desc"},"move X/Z")]),(0,n.Lk)("div",{class:"key-group"},[(0,n.Lk)("span",{class:"key"},"Q/E"),(0,n.Lk)("span",{class:"desc"},"up/down Y")]),(0,n.Lk)("div",{class:"key-group"},[(0,n.Lk)("span",{class:"key"},"R"),(0,n.Lk)("span",{class:"desc"},"rotate")]),(0,n.Lk)("div",{class:"key-group"},[(0,n.Lk)("span",{class:"key"},"Esc"),(0,n.Lk)("span",{class:"desc"},"deselect")]),(0,n.Lk)("div",{class:"key-group"},[(0,n.Lk)("span",{class:"key"},"Del/D"),(0,n.Lk)("span",{class:"desc"},"delete")])]),(0,n.Lk)("div",{class:"key-section"},[(0,n.Lk)("h4",null,"Colors"),(0,n.Lk)("div",{class:"key-group"},[(0,n.Lk)("span",{class:"key"},"1/2/3"),(0,n.Lk)("span",{class:"desc"},"clear/red/green")])]),(0,n.Lk)("div",{class:"key-section"},[(0,n.Lk)("h4",null,"Creation"),(0,n.Lk)("div",{class:"key-group"},[(0,n.Lk)("span",{class:"key"},"W"),(0,n.Lk)("span",{class:"desc"},"wall")]),(0,n.Lk)("div",{class:"key-group"},[(0,n.Lk)("span",{class:"key"},"F"),(0,n.Lk)("span",{class:"desc"},"foundation")]),(0,n.Lk)("div",{class:"key-group"},[(0,n.Lk)("span",{class:"key"},"P"),(0,n.Lk)("span",{class:"desc"},"platform")]),(0,n.Lk)("div",{class:"key-group"},[(0,n.Lk)("span",{class:"key"},"H"),(0,n.Lk)("span",{class:"desc"},"hatch platform")]),(0,n.Lk)("div",{class:"key-group"},[(0,n.Lk)("span",{class:"key"},"O"),(0,n.Lk)("span",{class:"desc"},"door")]),(0,n.Lk)("div",{class:"key-group"},[(0,n.Lk)("span",{class:"key"},"I"),(0,n.Lk)("span",{class:"desc"},"window")])])],-1)]))):(0,n.Q3)("",!0)])),_:1})])}var oe={name:"KeyHelper",data(){return{isOpen:!1}},methods:{toggle(){this.isOpen=!this.isOpen}}};const ne=(0,a.A)(oe,[["render",te],["__scopeId","data-v-3c11c274"]]);var re=ne;const ae=e=>new Promise((s=>setTimeout(s,e))),ie=new y.B,le=e=>JSON.parse(JSON.stringify(e)),ce=e=>new Promise((s=>{ie.load("/glb/"+e+".glb",(e=>{const t=e.scene.children[0];s(t)}),void 0,(t=>{console.error("load error",e,t),s(null)}))})),de={scene:null,camera:null,renderer:null,grid:null,lgrid:null,controls:null,ambient:null,lights:{},models:{},materials:{}};var ue={name:"HomeView",components:{UiPanel:G,KeyHelpmer:re},data(){return{cursor:[0,1,0],tool:null,lock:null,selection:null,construction:{},hiddenFloors:[]}},async created(){await ae(0),de.scene=new k.Z58,de.scene.background=new k.Q1f(6710886);const e=this.$refs.v3d.getBoundingClientRect();de.camera=new k.ubm(50,e.width/e.height,.1,1e3),de.camera.position.x=5,de.camera.position.z=5,de.camera.position.y=5,de.camera.lookAt(new k.Pq0(0,0,0)),de.renderer=new b.JeP({canvas:this.$refs.canvas,alpha:!0,antialias:!0}),de.renderer.shadowMap.enabled=!0,de.renderer.shadowMap.type=k.Wk7,de.renderer.setSize(e.width,e.height),de.renderer.setAnimationLoop((()=>this.animate())),de.lgrid=new k.fTw(10,10,11184895,10066363),de.scene.add(de.lgrid),de.controls=new m.N(de.camera,this.$refs.canvas),de.controls.target.set(0,0,0),de.lights.ambient=new k.$p8(16777215,.6),de.scene.add(de.lights.ambient),de.lights.hemi=new k.dth(14527231,5653317,.8),de.scene.add(de.lights.hemi),de.lights.dir=new k.ZyN(16777215,2),de.lights.dir.position.set(10,20,10),de.lights.dir.castShadow=!0,de.lights.dir.shadow.mapSize.width=2048,de.lights.dir.shadow.mapSize.height=2048,de.lights.dir.shadow.camera.near=.5,de.lights.dir.shadow.camera.far=50,de.lights.dir.shadow.camera.left=-20,de.lights.dir.shadow.camera.right=20,de.lights.dir.shadow.camera.top=20,de.lights.dir.shadow.camera.bottom=-20,de.scene.add(de.lights.dir);const s=new k.bdM(1,1),t=new k.V9B({color:1401481,side:k.$EB,transparent:!0,opacity:.9});de.cursor=new k.eaF(s,t),de.cursor.rotateX(Math.PI/2),de.cursor.position.set(this.cursor[0]+.5,this.cursor[1]-1,this.cursor[2]+.5),de.scene.add(de.cursor),de.bbox=new k.IWo,de.bbox.renderOrder=1e3,de.scene.add(de.bbox);const o=new k.bdM(100,100);de.mplane=new k.eaF(o,t),de.mplane.layers.set(2),de.mplane.rotateX(Math.PI/2),de.scene.add(de.mplane),await this.loadModel("foundation"),await this.loadModel("door"),await this.loadModel("window"),await this.loadModel("wall"),await this.loadModel("loongroof"),await this.loadModel("platform"),await this.loadModel("platformhole"),await this.loadModel("ramp"),await this.loadModel("smallroof"),await this.loadModel("stairs"),de.materials.wood=new k._4j({color:10387811,transparent:!0}),de.materials.gray=new k._4j({color:5131854,transparent:!0}),de.materials.red=new k._4j({color:10374734,transparent:!0}),de.materials.green=new k._4j({color:5152334,transparent:!0}),de.raycaster=new k.tBo},mounted(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("resize",this.onWindowResize)},beforeUnmount(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("resize",this.onWindowResize)},methods:{onWindowResize(){const e=this.$refs.v3d.getBoundingClientRect();de.renderer.setSize(e.width,e.height),de.camera.aspect=e.width/e.height,de.camera.updateProjectionMatrix()},onKeyDown(e){if("INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName)return;const s=["Delete","Backspace"];switch(s.includes(e.code)&&e.preventDefault(),e.code){case"Delete":case"Backspace":case"KeyD":this.removeSelection();break;case"KeyR":this.rotateSelection();break;case"Escape":this.onDeselect();break;case"ArrowUp":this.moveCursor(0,0,-1);break;case"ArrowDown":this.moveCursor(0,0,1);break;case"ArrowLeft":this.moveCursor(-1,0,0);break;case"ArrowRight":this.moveCursor(1,0,0);break;case"KeyQ":this.moveCursor(0,1,0);break;case"KeyE":this.moveCursor(0,-1,0);break;case"Digit1":this.setColor("clear");break;case"Digit2":this.setColor("red");break;case"Digit3":this.setColor("green");break;case"KeyW":this.addPart("wall");break;case"KeyF":this.addPart("foundation");break;case"KeyP":this.addPart("platform");break;case"KeyH":this.addPart("platformhole");break;case"KeyO":this.addPart("door");break;case"KeyI":this.addPart("window");break;case"KeyC":(e.ctrlKey||e.metaKey)&&(e.preventDefault(),this.save());break;case"KeyL":(e.ctrlKey||e.metaKey)&&(e.preventDefault(),this.$refs.uiPanel.$refs.fileInput.click());break}},moveCursor(e,s,t){const o=[this.cursor[0]+e,this.cursor[1]+s,this.cursor[2]+t];this.updateCursor(o)},animate(){de.controls.update(),de.renderer.render(de.scene,de.camera)},async loadModel(e){const s=await ce(e);de.models[e]=s},updateCursor(e){this.cursor=e,de.cursor.position.set(this.cursor[0]+.5,this.cursor[1]-.999,this.cursor[2]+.5),de.lgrid.position.y=this.cursor[1]-1,de.mplane.position.y=this.cursor[1]-1},addPart(e){const s=["rampup","rampdown"].includes(e)?"ramp":e;if(!de.models[s])return;const t=de.models[s].material.clone();t.transparent=!0;const o=new k.eaF(de.models[s].geometry,t);o.scale.set(.5,.5,.5),o.position.set(this.cursor[0]+.5,this.cursor[1]-1.5,this.cursor[2]+.5),o.castShadow=!0,o.receiveShadow=!0,o.layers.enable(1),de.scene.add(o),["foundation","platform","platformhole"].includes(e)||(o.position.y+=1),"rampdown"===e&&(o.position.y-=1),"rampup"===e&&(o.position.y-=.5),"stairs"===e&&(o.position.y-=.5),"loongroof"===e&&(o.position.y-=.5),o.layers.enable(1),de.scene.add(o),this.construction[o.uuid]={part:e,position:[...this.cursor],rotation:0,color:"clear"},this.selection=o,de.bbox.setFromObject(this.selection),de.bbox.visible=!0,this.lock=[...this.cursor]},rotateSelection(){this.selection&&(this.selection.rotateY(Math.PI/2),this.construction[this.selection.uuid].rotation++,this.construction[this.selection.uuid].rotation>=4&&(this.construction[this.selection.uuid].rotation-=4),de.bbox.update())},removeSelection(){this.selection&&(delete this.construction[this.selection.uuid],this.selection.removeFromParent(),this.selection=null,de.bbox.visible=!1)},onDeselect(){this.selection=null,de.bbox.visible=!1,this.lock=null},onClick(e){de.raycaster.layers.set(1);const s=new k.I9Y;s.x=e.clientX/window.innerWidth*2-1,s.y=-e.clientY/window.innerHeight*2+1,de.raycaster.setFromCamera(s,de.camera);const t=de.raycaster.intersectObjects(de.scene.children);t[0]&&t[0].object?this.selection&&t[0].object.uuid===this.selection.uuid?this.onDeselect():(this.selection=t[0].object,de.bbox.setFromObject(this.selection),de.bbox.visible=!0,this.lock=[...this.cursor]):this.lock?this.lock=null:this.lock=[...this.cursor]},onMove(e){if(this.lock||!de.raycaster)return;de.raycaster.layers.set(2);const s=new k.I9Y;s.x=e.clientX/window.innerWidth*2-1,s.y=-e.clientY/window.innerHeight*2+1,de.raycaster.setFromCamera(s,de.camera);const t=de.raycaster.intersectObjects(de.scene.children);if(t[0]){const e=t[0].point,s=[...this.cursor];this.updateCursor([Math.floor(e.x),s[1],Math.floor(e.z)])}},setColor(e){if(!this.selection)return;const s=this.selection.material;s.emissiveIntensity="clear"===e?0:.1,"green"===e&&(s.emissive=new k.Q1f(65280)),"red"===e&&(s.emissive=new k.Q1f(16711680))},toggleFloor(e){this.hiddenFloors.includes(e)?this.hiddenFloors=this.hiddenFloors.filter((s=>s!==e)):this.hiddenFloors.push(e),this.setFloors()},setFloors(){Object.keys(this.construction).forEach((e=>{const s=this.construction[e],t=s.position[1],o=de.scene.getObjectByProperty("uuid",e);o&&(this.hiddenFloors.includes(t)?(o.layers.disable(1),o.material.opacity=.05):(o.layers.enable(1),o.material.opacity=1))}))},save(){const e={type:"construction/freedom",version:1,construction:le(this.construction),floors:le(this.hiddenFloors)},s=JSON.stringify(e),t=new Blob([s],{type:"text/plain"}),o=URL.createObjectURL(t),n=document.createElement("a");n.href=o,n.download="construction.json",n.click()},async loadFile(e){const s=await e.text();let t=null;try{t=JSON.parse(s)}catch(o){console.error("read file",o),t=null}t&&("construction/freedom"===t.type&&1===t.version?(this.reset(),Object.values(t.construction).forEach((e=>{this.updateCursor(e.position),this.addPart(e.part),this.setColor(e.color);for(let s=e.rotation;s>0;s--)this.rotateSelection()})),this.hiddenFloors=[...t.floors],this.setFloors()):console.error("format not supported"))},reset(){this.onDeselect(),this.selection=null,Object.keys(this.construction).forEach((e=>{const s=de.scene.getObjectByProperty("uuid",e);s&&s.removeFromParent()})),this.updateCursor([0,1,0])}},watch:{layer(e){de.lgrid.position.y=e-1}}};const pe=(0,a.A)(ue,[["render",h]]);var he=pe;const ke=[{path:"/",name:"home",component:he}],be=(0,d.aE)({history:(0,d.LA)("/dayz-freedom-calculator/"),routes:ke});var me=be,ye=t(782),ve=(0,ye.y$)({state:{},getters:{},mutations:{},actions:{},modules:{}});(0,o.Ef)(c).use(ve).use(me).mount("#app")}},s={};function t(o){var n=s[o];if(void 0!==n)return n.exports;var r=s[o]={exports:{}};return e[o].call(r.exports,r,r.exports,t),r.exports}t.m=e,function(){var e=[];t.O=function(s,o,n,r){if(!o){var a=1/0;for(d=0;d<e.length;d++){o=e[d][0],n=e[d][1],r=e[d][2];for(var i=!0,l=0;l<o.length;l++)(!1&r||a>=r)&&Object.keys(t.O).every((function(e){return t.O[e](o[l])}))?o.splice(l--,1):(i=!1,r<a&&(a=r));if(i){e.splice(d--,1);var c=n();void 0!==c&&(s=c)}}return s}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[o,n,r]}}(),function(){t.n=function(e){var s=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(s,{a:s}),s}}(),function(){t.d=function(e,s){for(var o in s)t.o(s,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:s[o]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,s){return Object.prototype.hasOwnProperty.call(e,s)}}(),function(){var e={524:0};t.O.j=function(s){return 0===e[s]};var s=function(s,o){var n,r,a=o[0],i=o[1],l=o[2],c=0;if(a.some((function(s){return 0!==e[s]}))){for(n in i)t.o(i,n)&&(t.m[n]=i[n]);if(l)var d=l(t)}for(s&&s(o);c<a.length;c++)r=a[c],t.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return t.O(d)},o=self["webpackChunkhcalc"]=self["webpackChunkhcalc"]||[];o.forEach(s.bind(null,0)),o.push=s.bind(null,o.push.bind(o))}();var o=t.O(void 0,[504],(function(){return t(2165)}));o=t.O(o)})();
//# sourceMappingURL=app.b23d872c.js.map
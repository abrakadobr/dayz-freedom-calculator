(function(){"use strict";var t={186:function(t,o,e){var s=e(9318),r=e(700);function n(t,o){const e=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.Wv)(e)}var l=e(5253);const i={},a=(0,l.A)(i,[["render",n]]);var c=a,d=e(83);const h={class:"home wh-100"},u={class:"view-3d wh-100 position-relative",ref:"v3d"};function k(t,o,e,s,n,l){const i=(0,r.g2)("UiPanel"),a=(0,r.g2)("KeyHelpmer"),c=(0,r.g2)("ToolBar");return(0,r.uX)(),(0,r.CE)("div",h,[(0,r.Lk)("div",u,[(0,r.Lk)("canvas",{onClick:o[0]||(o[0]=(...t)=>l.onClick&&l.onClick(...t)),ref:"canvas",onMousemove:o[1]||(o[1]=(...t)=>l.onMove&&l.onMove(...t))},null,544),(0,r.bF)(i,{floors:n.hiddenFloors,construction:n.construction,selected:n.selection?n.selection.uuid:null,onRemove:l.removeSelection,onRotate:l.rotateSelection,onDeselect:l.onDeselect,onAddPart:l.addPart,cursor:n.cursor,onColor:l.setColor,onCad:l.cad,onSave:l.save,onLoadFile:l.loadFile,onToggleFloor:l.toggleFloor,onUpdatePos:l.updateCursor,ref:"uiPanel",onReset:l.reset,onUp:o[2]||(o[2]=t=>l.moveCursor(0,1,0)),onDown:o[3]||(o[3]=t=>l.moveCursor(0,-1,0))},null,8,["floors","construction","selected","onRemove","onRotate","onDeselect","onAddPart","cursor","onColor","onCad","onSave","onLoadFile","onToggleFloor","onUpdatePos","onReset"]),(0,r.bF)(a),(0,r.bF)(c,{selection:n.selection,tool:n.tool,onTool:l.onTool,onColor:l.setColor},null,8,["selection","tool","onTool","onColor"]),o[4]||(o[4]=(0,r.Lk)("div",{class:"about"},"abrakadobr 2025 for FREEDOM DayZ. 3D models and lights by Vlad Kobranov",-1))],512)])}e(4114),e(8111),e(2489),e(116),e(7588),e(1701);var p=e(1419),m=e(4624),w=e(9983),f=e(5608),g=e(1876);const v={class:"ui-panel"},y={class:"tool-group"},b=["title"],L=["onClick"],C=["title","disabled"],x={class:"tool-group"},M=["title"],$=["title"],F=["title"],j=["title"],I=["title"],E=["title"],P={class:"bottom-panel"},z={class:"tool-group"},O=["title"],_=["title"],S=["title"],R={class:"tool-button"},A={class:"tool-button"},X={class:"tool-button"},B={class:"tool-button"},D={class:"tool-group"},H=["title"],K=["title"],T=["title"],Z={class:"tool-group"},N=["title"];function U(t,o,e,s,n,l){const i=(0,r.g2)("FloorsIcon"),a=(0,r.g2)("CadIcon"),c=(0,r.g2)("PlanksIcon"),d=(0,r.g2)("NailsIcon"),h=(0,r.g2)("CodelockIcon"),u=(0,r.g2)("UpIcon"),k=(0,r.g2)("DownIcon"),p=(0,r.g2)("CursorIcon"),m=(0,r.g2)("SaveIcon"),w=(0,r.g2)("LoadIcon"),f=(0,r.g2)("NewIcon");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("div",v,[(0,r.Lk)("div",y,[(0,r.Lk)("div",{title:t.$t("ui.floors"),class:"tool-button"},[(0,r.bF)(i)],8,b),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.layers,(o=>((0,r.uX)(),(0,r.CE)("button",{key:o,onClick:e=>t.$emit("toggleFloor",o),class:(0,g.C4)(["tool-button",{selected:!e.floors.includes(o)}])},(0,g.v_)(o),11,L)))),128)),(0,r.Lk)("button",{title:t.$t("ui.cad"),onClick:o[0]||(o[0]=o=>t.$emit("cad")),class:(0,g.C4)(["tool-button",{selected:l.layers.length}]),disabled:!l.layers.length},[(0,r.bF)(a)],10,C)]),(0,r.Lk)("div",x,[(0,r.Lk)("div",{title:t.$t("ui.planks"),class:"tool-button"},[(0,r.bF)(c)],8,M),(0,r.Lk)("div",{title:t.$t("ui.planks"),class:"tool-button selected tool-button-w2"},(0,g.v_)(l.resources.planks),9,$),(0,r.Lk)("div",{title:t.$t("ui.nails"),class:"tool-button"},[(0,r.bF)(d)],8,F),(0,r.Lk)("div",{title:t.$t("ui.nails"),class:"tool-button selected tool-button-w2"},(0,g.v_)(l.resources.nails),9,j),(0,r.Lk)("div",{title:t.$t("ui.codelocks"),class:"tool-button"},[(0,r.bF)(h)],8,I),(0,r.Lk)("div",{title:t.$t("ui.codelocks"),class:"tool-button selected tool-button-w2"},(0,g.v_)(l.resources.codelocks),9,E)])]),(0,r.Lk)("div",P,[(0,r.Lk)("div",z,[(0,r.Lk)("button",{title:t.$t("ui.wpup"),onClick:o[1]||(o[1]=o=>t.$emit("up")),class:"tool-button"},[(0,r.bF)(u)],8,O),(0,r.Lk)("button",{title:t.$t("ui.wpdown"),onClick:o[2]||(o[2]=o=>t.$emit("down")),class:"tool-button"},[(0,r.bF)(k)],8,_)]),(0,r.Lk)("div",{title:t.$t("ui.position"),class:"tool-group"},[(0,r.Lk)("div",R,[(0,r.bF)(p)]),(0,r.Lk)("div",A,(0,g.v_)(e.cursor[0]),1),(0,r.Lk)("div",X,(0,g.v_)(e.cursor[1]),1),(0,r.Lk)("div",B,(0,g.v_)(e.cursor[2]),1)],8,S),(0,r.Lk)("div",D,[(0,r.Lk)("button",{title:t.$t("ui.save"),onClick:o[3]||(o[3]=o=>t.$emit("save")),class:"tool-button"},[(0,r.bF)(m)],8,H),(0,r.Lk)("label",{title:t.$t("ui.load"),for:"load-file",class:"tool-button"},[(0,r.bF)(w),(0,r.Lk)("input",{type:"file",id:"load-file",class:"d-none",accept:".json",ref:"fileInput",onChange:o[4]||(o[4]=o=>t.$emit("loadFile",o.target.files[0]))},null,544)],8,K),(0,r.Lk)("button",{title:t.$t("ui.reset"),onClick:o[5]||(o[5]=o=>t.$emit("reset")),class:"tool-button"},[(0,r.bF)(f)],8,T)]),(0,r.Lk)("div",Z,[(0,r.Lk)("button",{title:t.$t("ui.lang"),onClick:o[6]||(o[6]=(...t)=>l.toggleLocale&&l.toggleLocale(...t)),class:"tool-button"},(0,g.v_)(t.$t("lang."+t.$i18n.locale)),9,N)])])],64)}const W={xmlns:"http://www.w3.org/2000/svg","xml:space":"preserve",width:"32",height:"32",viewBox:"0 0 7.533 7.533"};function Y(t,o){return(0,r.uX)(),(0,r.CE)("svg",W,o[0]||(o[0]=[(0,r.Lk)("path",{d:"m1.477 1.398 2.117 4.866.072-.19.629-1.648 1.959-.58Zm.335.36L5.81 3.805l-1.641.486-.586 1.531z",style:{color:"#000",fill:"none",stroke:"#000","stroke-opacity":"1","stroke-width":".235405","stroke-dasharray":"none"}},null,-1)]))}const V={},J=(0,l.A)(V,[["render",Y]]);var q=J;const Q={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function G(t,o){return(0,r.uX)(),(0,r.CE)("svg",Q,o[0]||(o[0]=[(0,r.Lk)("path",{d:"M1.202 1.092h6.292l-.66 1.22-4.853.02ZM1.202 5.727h6.292l-.66-1.22-4.853-.02Z",style:{fill:"none",stroke:"#000","stroke-width":".264583","stroke-linecap":"round","stroke-linejoin":"round","paint-order":"markers fill stroke"},transform:"translate(-.115 .824)"},null,-1),(0,r.Lk)("path",{d:"M1.144 3.385h6.344",style:{fill:"none",stroke:"#000","stroke-width":".264583px","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1"},transform:"translate(-.115 .824)"},null,-1)]))}const tt={},ot=(0,l.A)(tt,[["render",G]]);var et=ot;const st={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function rt(t,o){return(0,r.uX)(),(0,r.CE)("svg",st,o[0]||(o[0]=[(0,r.Lk)("path",{d:"M1.524 2.155v4.71l.357.773.302-.807V2.147M.427 2.139h2.794",style:{fill:"none",stroke:"#000","stroke-width":".264583px","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1"},transform:"rotate(45 3.122 7.13)"},null,-1)]))}const nt={},lt=(0,l.A)(nt,[["render",rt]]);var it=lt;const at={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function ct(t,o){return(0,r.uX)(),(0,r.CE)("svg",at,o[0]||(o[0]=[(0,r.Lk)("path",{d:"M2.005 6.012H7.83l-1.052.835H.953Z",style:{fill:"none",stroke:"#000","stroke-width":".264583","stroke-linecap":"round","stroke-linejoin":"round","paint-order":"markers fill stroke"},transform:"translate(-.158 -1.518)"},null,-1),(0,r.Lk)("path",{d:"M2.005 5.35H7.83l-1.052.835H.953Z",style:{fill:"none",stroke:"#000","stroke-width":".264583","stroke-linecap":"round","stroke-linejoin":"round","paint-order":"markers fill stroke"},transform:"translate(-.158 -1.518)"},null,-1),(0,r.Lk)("path",{d:"M2.005 4.655H7.83l-1.052.836H.953Z",style:{fill:"none",stroke:"#000","stroke-width":".264583","stroke-linecap":"round","stroke-linejoin":"round","paint-order":"markers fill stroke"},transform:"translate(-.158 -1.518)"},null,-1)]))}const dt={},ht=(0,l.A)(dt,[["render",ct]]);var ut=ht;const kt={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function pt(t,o){return(0,r.uX)(),(0,r.CE)("svg",kt,o[0]||(o[0]=[(0,r.Lk)("path",{d:"M-.121.994h6.297v6.297H-.121z",style:{fill:"none",stroke:"#000","stroke-width":".264583","stroke-linecap":"round","stroke-linejoin":"round","stroke-dasharray":"none","stroke-opacity":"1","paint-order":"markers fill stroke"},transform:"translate(1.32 .087)"},null,-1),(0,r.Lk)("path",{d:"M.617 1.708h4.747v1.237H.617zM.755 3.617h.775v.71H.755zM2.599 3.617h.775v.71h-.775zM4.519 3.617h.775v.71h-.775zM.755 4.833h.775v.71H.755zM2.599 4.833h.775v.71h-.775zM4.519 4.833h.775v.71h-.775zM.755 6.019h.775v.71H.755zM2.599 6.019h.775v.71h-.775zM4.519 6.019h.775v.71h-.775z",style:{fill:"none",stroke:"#000","stroke-width":".264583","stroke-linecap":"round","stroke-linejoin":"round","stroke-dasharray":"none","stroke-opacity":"1","paint-order":"markers fill stroke"},transform:"translate(1.32 .087)"},null,-1)]))}const mt={},wt=(0,l.A)(mt,[["render",pt]]);var ft=wt;const gt={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function vt(t,o){return(0,r.uX)(),(0,r.CE)("svg",gt,o[0]||(o[0]=[(0,r.Lk)("path",{d:"M4.73 1.98a.543.543 0 0 1-.542.543.543.543 0 0 1-.542-.542.543.543 0 0 1 .542-.543.543.543 0 0 1 .543.543",style:{opacity:"1",fill:"none",stroke:"#000","stroke-width":".264583","stroke-linecap":"round","stroke-linejoin":"round","paint-order":"markers fill stroke","stop-color":"#000","stop-opacity":"1"}},null,-1),(0,r.Lk)("path",{d:"M1.486 4.162a3.46 3.46 0 0 0 2.682 1.279c.99 0 1.933-.427 2.588-1.17",style:{fill:"none",stroke:"#000","stroke-width":".264583","stroke-linecap":"round","stroke-linejoin":"round","paint-order":"markers fill stroke","stop-color":"#000"}},null,-1),(0,r.Lk)("path",{d:"m4.587 2.383 2.34 4.924M3.84 2.358 1.622 7.316M4.18 1.437l.007-.97",style:{fill:"none",stroke:"#000","stroke-width":".264583px","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1"}},null,-1)]))}const yt={},bt=(0,l.A)(yt,[["render",vt]]);var Lt=bt;const Ct={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function xt(t,o){return(0,r.uX)(),(0,r.CE)("svg",Ct,o[0]||(o[0]=[(0,r.Lk)("path",{d:"M1.371 1.714v4.688h5.41v-3.16L5.24 1.705Z",style:{fill:"none",stroke:"#000","stroke-width":".264583px","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1"}},null,-1),(0,r.Lk)("path",{d:"M3.774 7.607V3.805l.768 1.426M3.798 3.837 3.15 5.121",style:{fill:"none",stroke:"#000","stroke-width":".264583px","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1"},transform:"translate(.179 .593)"},null,-1),(0,r.Lk)("path",{d:"M1.992 1.758v1.678h2.63V1.733",style:{fill:"none",stroke:"#000","stroke-width":".264583px","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1"}},null,-1)]))}const Mt={},$t=(0,l.A)(Mt,[["render",xt]]);var Ft=$t;const jt={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function It(t,o){return(0,r.uX)(),(0,r.CE)("svg",jt,o[0]||(o[0]=[(0,r.Lk)("path",{d:"M1.371 1.714v4.688h5.41v-3.16L5.24 1.705Z",style:{fill:"none",stroke:"#000","stroke-width":".264583px","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1"}},null,-1),(0,r.Lk)("path",{d:"M3.774 7.607V3.805l.768 1.426M3.798 3.837 3.15 5.121",style:{fill:"none",stroke:"#000","stroke-width":".264583px","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1"},transform:"matrix(1 0 0 -1 .179 11.943)"},null,-1),(0,r.Lk)("path",{d:"M1.992 1.758v1.678h2.63V1.733",style:{fill:"none",stroke:"#000","stroke-width":".264583px","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1"}},null,-1)]))}const Et={},Pt=(0,l.A)(Et,[["render",It]]);var zt=Pt;const Ot={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function _t(t,o){return(0,r.uX)(),(0,r.CE)("svg",Ot,o[0]||(o[0]=[(0,r.Lk)("path",{d:"M1.371 1.714v4.688h5.41v-3.16L5.24 1.705Z",style:{fill:"none",stroke:"#000","stroke-width":".264583px","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1"}},null,-1)]))}const St={},Rt=(0,l.A)(St,[["render",_t]]);var At=Rt;const Xt={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function Bt(t,o){return(0,r.uX)(),(0,r.CE)("svg",Xt,o[0]||(o[0]=[(0,r.Lk)("path",{d:"M3.774 7.607V3.805l.768 1.426M3.798 3.837 3.15 5.121",style:{fill:"none",stroke:"#000","stroke-width":".264583px","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1"},transform:"translate(.535 -3.302)"},null,-1),(0,r.Lk)("path",{d:"M2.267 3.521h5.307L6.2 4.946H.893Z",style:{fill:"none",stroke:"#000","stroke-width":".264583","stroke-linecap":"round","stroke-linejoin":"round","paint-order":"markers fill stroke"}},null,-1)]))}const Dt={},Ht=(0,l.A)(Dt,[["render",Bt]]);var Kt=Ht;const Tt={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function Zt(t,o){return(0,r.uX)(),(0,r.CE)("svg",Tt,o[0]||(o[0]=[(0,r.Lk)("path",{d:"M3.774 7.607V3.805l.768 1.426M3.798 3.837 3.15 5.121",style:{fill:"none",stroke:"#000","stroke-width":".264583px","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1"},transform:"matrix(1 0 0 -1 .535 11.762)"},null,-1),(0,r.Lk)("path",{d:"M2.267 3.521h5.307L6.2 4.946H.893Z",style:{fill:"none",stroke:"#000","stroke-width":".264583","stroke-linecap":"round","stroke-linejoin":"round","paint-order":"markers fill stroke"}},null,-1)]))}const Nt={},Ut=(0,l.A)(Nt,[["render",Zt]]);var Wt=Ut,Yt={name:"UiPanel",emits:["addPart","updatePos","remove","rotate","deselect","color","toggleFloor","save","loadFile","reset","up","down","cad"],components:{UpIcon:Kt,DownIcon:Wt,SaveIcon:Ft,LoadIcon:zt,NewIcon:At,CursorIcon:q,NailsIcon:it,PlanksIcon:ut,CodelockIcon:ft,FloorsIcon:et,CadIcon:Lt},props:{cursor:{type:Array,required:!0,default:()=>[0,1,0]},selected:{type:[String,null,void 0],required:!1},construction:{type:[Object,null],required:!1,default:()=>({})},floors:{type:[Array,null,void 0],required:!1,default:()=>[]}},data(){return{cpos:{x:this.cursor[0],y:this.cursor[1],z:this.cursor[2]}}},watch:{cursor:{deep:!0,handler(t){t[0]!==this.cpos.x&&(this.cpos.x=t[0]),t[1]!==this.cpos.y&&(this.cpos.y=t[1]),t[2]!==this.cpos.z&&(this.cpos.z=t[2])}},cpos:{deep:!0,handler(t){t.x===this.cursor[0]&&t.y===this.cursor[1]&&t.z===this.cursor[2]||this.$emit("updatePos",[t.x,t.y,t.z])}}},computed:{parts(){return Object.values(this.construction).filter((t=>!this.floors.includes(t.position[1])))},resources(){const t={nails:0,planks:0,codelocks:0};return this.parts.forEach((o=>{"door"===o.part?(t.nails+=28,t.planks+=8,t.codelocks+=1):(t.nails+=20,t.planks+=10)})),t},layers(){const t=[];return Object.values(this.construction).forEach((o=>{if(!o.position)return void console.error("p.!position",o);const e=o.position[1];t.includes(e)||t.push(e)})),t.sort()}},methods:{ceil(t,o){return Math.ceil(t/o)},toggleFloor(t){this.$emit("toggleFloor",t)},toggleLocale(){const t=this.$i18n.availableLocales,o=t.findIndex((t=>t===this.$i18n.locale)),e=o===t.length-1?0:o+1;this.$i18n.locale=t[e],localStorage.setItem("locale",this.$i18n.locale)}}};const Vt=(0,l.A)(Yt,[["render",U],["__scopeId","data-v-44610c40"]]);var Jt=Vt;const qt={class:"key-helper"},Qt={key:0,class:"helper-content"},Gt={class:"keys-vertical"},to={class:"key-section"},oo={class:"key-group"},eo={class:"desc"},so={class:"key-group"},ro={class:"desc"},no={class:"key-section"},lo={class:"key-group"},io={class:"desc"},ao={class:"key-group"},co={class:"desc"},ho={class:"key-group"},uo={class:"desc"},ko={class:"key-group"},po={class:"desc"},mo={class:"key-group"},wo={class:"desc"},fo={class:"key-section"},go={class:"key-group"},vo={class:"desc"},yo={class:"key-section"},bo={class:"key-group"},Lo={class:"desc"},Co={class:"key-group"},xo={class:"desc"},Mo={class:"key-group"},$o={class:"desc"},Fo={class:"key-group"},jo={class:"desc"},Io={class:"key-group"},Eo={class:"desc"},Po={class:"key-group"},zo={class:"desc"};function Oo(t,o,e,n,l,i){return(0,r.uX)(),(0,r.CE)("div",qt,[(0,r.Lk)("button",{onClick:o[0]||(o[0]=(...t)=>i.toggle&&i.toggle(...t)),class:"helper-toggle"},(0,g.v_)(l.isOpen?t.$t("keys.hide"):t.$t("keys.button")),1),(0,r.bF)(s.eB,{name:"slide"},{default:(0,r.k6)((()=>[l.isOpen?((0,r.uX)(),(0,r.CE)("div",Qt,[(0,r.Lk)("div",Gt,[(0,r.Lk)("div",to,[(0,r.Lk)("h4",null,(0,g.v_)(t.$t("keys.saveload")),1),(0,r.Lk)("div",oo,[o[1]||(o[1]=(0,r.Lk)("span",{class:"key"},"Ctrl+C",-1)),(0,r.Lk)("span",eo,(0,g.v_)(t.$t("keys.save")),1)]),(0,r.Lk)("div",so,[o[2]||(o[2]=(0,r.Lk)("span",{class:"key"},"Ctrl+L",-1)),(0,r.Lk)("span",ro,(0,g.v_)(t.$t("keys.load")),1)])]),(0,r.Lk)("div",no,[o[8]||(o[8]=(0,r.Lk)("h4",null,"Navigation",-1)),(0,r.Lk)("div",lo,[o[3]||(o[3]=(0,r.Lk)("span",{class:"key"},"↑↓←→",-1)),(0,r.Lk)("span",io,(0,g.v_)(t.$t("keys.movexz")),1)]),(0,r.Lk)("div",ao,[o[4]||(o[4]=(0,r.Lk)("span",{class:"key"},"Q/E",-1)),(0,r.Lk)("span",co,(0,g.v_)(t.$t("keys.updown")),1)]),(0,r.Lk)("div",ho,[o[5]||(o[5]=(0,r.Lk)("span",{class:"key"},"R",-1)),(0,r.Lk)("span",uo,(0,g.v_)(t.$t("keys.rotate")),1)]),(0,r.Lk)("div",ko,[o[6]||(o[6]=(0,r.Lk)("span",{class:"key"},"Esc",-1)),(0,r.Lk)("span",po,(0,g.v_)(t.$t("keys.deselect")),1)]),(0,r.Lk)("div",mo,[o[7]||(o[7]=(0,r.Lk)("span",{class:"key"},"Del/D",-1)),(0,r.Lk)("span",wo,(0,g.v_)(t.$t("keys.delete")),1)])]),(0,r.Lk)("div",fo,[o[10]||(o[10]=(0,r.Lk)("h4",null,"Colors",-1)),(0,r.Lk)("div",go,[o[9]||(o[9]=(0,r.Lk)("span",{class:"key"},"1/2/3",-1)),(0,r.Lk)("span",vo,(0,g.v_)(t.$t("keys.clearredgreen")),1)])]),(0,r.Lk)("div",yo,[o[17]||(o[17]=(0,r.Lk)("h4",null,"Creation",-1)),(0,r.Lk)("div",bo,[o[11]||(o[11]=(0,r.Lk)("span",{class:"key"},"W",-1)),(0,r.Lk)("span",Lo,(0,g.v_)(t.$t("tools.wall")),1)]),(0,r.Lk)("div",Co,[o[12]||(o[12]=(0,r.Lk)("span",{class:"key"},"F",-1)),(0,r.Lk)("span",xo,(0,g.v_)(t.$t("tools.foundation")),1)]),(0,r.Lk)("div",Mo,[o[13]||(o[13]=(0,r.Lk)("span",{class:"key"},"P",-1)),(0,r.Lk)("span",$o,(0,g.v_)(t.$t("tools.platform")),1)]),(0,r.Lk)("div",Fo,[o[14]||(o[14]=(0,r.Lk)("span",{class:"key"},"H",-1)),(0,r.Lk)("span",jo,(0,g.v_)(t.$t("tools.platformhole")),1)]),(0,r.Lk)("div",Io,[o[15]||(o[15]=(0,r.Lk)("span",{class:"key"},"O",-1)),(0,r.Lk)("span",Eo,(0,g.v_)(t.$t("tools.door")),1)]),(0,r.Lk)("div",Po,[o[16]||(o[16]=(0,r.Lk)("span",{class:"key"},"I",-1)),(0,r.Lk)("span",zo,(0,g.v_)(t.$t("tools.window")),1)])])])])):(0,r.Q3)("",!0)])),_:1})])}var _o={name:"KeyHelper",data(){return{isOpen:!1}},methods:{toggle(){this.isOpen=!this.isOpen}}};const So=(0,l.A)(_o,[["render",Oo],["__scopeId","data-v-8314d086"]]);var Ro=So;const Ao={class:"tool-bar"},Xo=["title"],Bo={class:"tool-group"},Do=["title"],Ho=["title"],Ko=["title"],To=["title"],Zo={class:"tool-group"},No=["title"],Uo=["title"],Wo=["title"],Yo={class:"tool-group"},Vo=["title"],Jo=["title"],qo=["title"],Qo=["title"],Go={class:"tool-group"},te=["title","disabled"],oe=["title","disabled"],ee=["title","disabled"];function se(t,o,e,s,n,l){const i=(0,r.g2)("CursorIcon"),a=(0,r.g2)("FoundationIcon"),c=(0,r.g2)("PlatformIcon"),d=(0,r.g2)("PlatformHoleIcon"),h=(0,r.g2)("StairsIcon"),u=(0,r.g2)("WallIcon"),k=(0,r.g2)("WindowIcon"),p=(0,r.g2)("DoorIcon"),m=(0,r.g2)("RampIcon"),w=(0,r.g2)("SmallRoofIcon"),f=(0,r.g2)("LongRoofIcon");return(0,r.uX)(),(0,r.CE)("div",Ao,[(0,r.Lk)("button",{title:t.$t("tools.select"),onClick:o[0]||(o[0]=o=>t.$emit("tool","select")),class:(0,g.C4)(["tool-button",{selected:"select"===e.tool}])},[(0,r.bF)(i)],10,Xo),(0,r.Lk)("div",Bo,[(0,r.Lk)("button",{title:t.$t("tools.foundation"),onClick:o[1]||(o[1]=o=>t.$emit("tool","foundation")),class:(0,g.C4)(["tool-button",{selected:"foundation"===e.tool}])},[(0,r.bF)(a)],10,Do),(0,r.Lk)("button",{title:t.$t("tools.platform"),onClick:o[2]||(o[2]=o=>t.$emit("tool","platform")),class:(0,g.C4)(["tool-button",{selected:"platform"===e.tool}])},[(0,r.bF)(c)],10,Ho),(0,r.Lk)("button",{title:t.$t("tools.platformhole"),onClick:o[3]||(o[3]=o=>t.$emit("tool","platformhole")),class:(0,g.C4)(["tool-button",{selected:"platformhole"===e.tool}])},[(0,r.bF)(d)],10,Ko),(0,r.Lk)("button",{title:t.$t("tools.stairs"),onClick:o[4]||(o[4]=o=>t.$emit("tool","stairs")),class:(0,g.C4)(["tool-button",{selected:"stairs"===e.tool}])},[(0,r.bF)(h)],10,To)]),(0,r.Lk)("div",Zo,[(0,r.Lk)("button",{title:t.$t("tools.wall"),onClick:o[5]||(o[5]=o=>t.$emit("tool","wall")),class:(0,g.C4)(["tool-button",{selected:"wall"===e.tool}])},[(0,r.bF)(u)],10,No),(0,r.Lk)("button",{title:t.$t("tools.window"),onClick:o[6]||(o[6]=o=>t.$emit("tool","window")),class:(0,g.C4)(["tool-button",{selected:"window"===e.tool}])},[(0,r.bF)(k)],10,Uo),(0,r.Lk)("button",{title:t.$t("tools.door"),onClick:o[7]||(o[7]=o=>t.$emit("tool","door")),class:(0,g.C4)(["tool-button",{selected:"door"===e.tool}])},[(0,r.bF)(p)],10,Wo)]),(0,r.Lk)("div",Yo,[(0,r.Lk)("button",{title:t.$t("tools.rampup"),onClick:o[8]||(o[8]=o=>t.$emit("tool","rampup")),class:(0,g.C4)(["tool-button rampup",{selected:"rampup"===e.tool}])},[(0,r.bF)(m)],10,Vo),(0,r.Lk)("button",{title:t.$t("tools.rampdown"),onClick:o[9]||(o[9]=o=>t.$emit("tool","rampdown")),class:(0,g.C4)(["tool-button",{selected:"rampdown"===e.tool}])},[(0,r.bF)(m)],10,Jo),(0,r.Lk)("button",{title:t.$t("tools.smallroof"),onClick:o[10]||(o[10]=o=>t.$emit("tool","smallroof")),class:(0,g.C4)(["tool-button",{selected:"smallroof"===e.tool}])},[(0,r.bF)(w)],10,qo),(0,r.Lk)("button",{title:t.$t("tools.longroof"),onClick:o[11]||(o[11]=o=>t.$emit("tool","longroof")),class:(0,g.C4)(["tool-button",{selected:"longroof"===e.tool}])},[(0,r.bF)(f)],10,Qo)]),(0,r.Lk)("div",Go,[(0,r.Lk)("button",{title:t.$t("tools.clear"),onClick:o[12]||(o[12]=o=>t.$emit("color","clear")),disabled:!e.selection,class:"tool-button button-clear"},null,8,te),(0,r.Lk)("button",{title:t.$t("tools.green"),onClick:o[13]||(o[13]=o=>t.$emit("color","green")),disabled:!e.selection,class:"tool-button button-green"},null,8,oe),(0,r.Lk)("button",{title:t.$t("tools.red"),onClick:o[14]||(o[14]=o=>t.$emit("color","red")),disabled:!e.selection,class:"tool-button button-red"},null,8,ee)])])}const re={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function ne(t,o){return(0,r.uX)(),(0,r.CE)("svg",re,o[0]||(o[0]=[(0,r.Lk)("g",{style:{display:"inline",fill:"none",stroke:"#000","stroke-opacity":"1","stroke-width":"6.38646664","stroke-dasharray":"none"}},[(0,r.Lk)("path",{d:"m58.43 111.614 3.358 70.11-6.974 1.815-4.149-2.226-4.692-81.44 69.953-8.46 56.303 11.914-4.405 85.12-6.365 2.119 4.381-78.984L103.75 123.1l.876 87.487-8.155 2.699-6.064-3.68-1.877-87.228-37.992-13.19 4.317 74.81",style:{fill:"none",stroke:"#000","stroke-width":"6.38646664","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1","stroke-dasharray":"none"},transform:"matrix(.04143 0 0 .04143 -.292 -1.921)"}),(0,r.Lk)("path",{d:"m96.294 213.323-1.717-97.454-48.125-15.403M94.283 115.867l77.884-12.422M158.703 113.37l-3.559 74.376 6.71 2.779M120.66 120.24l-.355 46.001-5.7 1.284-4.792-1.886.234-43.885M115.14 167.709l.84-47.085",style:{fill:"none",stroke:"#000","stroke-width":"6.38646664","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1","stroke-dasharray":"none"},transform:"matrix(.04143 0 0 .04143 -.292 -1.921)"})],-1)]))}const le={},ie=(0,l.A)(le,[["render",ne]]);var ae=ie;const ce={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function de(t,o){return(0,r.uX)(),(0,r.CE)("svg",ce,o[0]||(o[0]=[(0,r.Lk)("g",{style:{display:"inline",fill:"none",stroke:"#000","stroke-opacity":"1","stroke-width":"6.38646664","stroke-dasharray":"none"}},[(0,r.Lk)("path",{d:"m24.498 100.387.546 8.234 57.285 19.11 108.99-14.455.913-9.419-71.845-12.713z",style:{fill:"none",stroke:"#000","stroke-width":"6.38646664","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1","stroke-dasharray":"none"},transform:"matrix(.04143 0 0 .04143 -.01 -.172)"}),(0,r.Lk)("path",{d:"m24.889 101.024 56.528 16.254 110.97-13.354M81.884 127.703 81.5 117.14",style:{fill:"none",stroke:"#000","stroke-width":"6.38646664","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1","stroke-dasharray":"none"},transform:"matrix(.04143 0 0 .04143 -.01 -.172)"})],-1)]))}const he={},ue=(0,l.A)(he,[["render",de]]);var ke=ue;const pe={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function me(t,o){return(0,r.uX)(),(0,r.CE)("svg",pe,o[0]||(o[0]=[(0,r.Lk)("g",{style:{display:"inline",fill:"none",stroke:"#000","stroke-opacity":"1","stroke-width":"6.21314809","stroke-dasharray":"none"}},[(0,r.Lk)("path",{d:"m24.498 100.387.546 8.234 57.285 19.11 108.99-14.455.913-9.419-71.845-12.713z",style:{fill:"none",stroke:"#000","stroke-width":"6.21314809","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1","stroke-dasharray":"none"},transform:"matrix(.04258 -.0002 .0002 .04258 -.309 -.28)"}),(0,r.Lk)("path",{d:"m24.889 101.024 56.528 16.254 110.97-13.354M81.884 127.703 81.5 117.14",style:{fill:"none",stroke:"#000","stroke-width":"6.21314809","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1","stroke-dasharray":"none"},transform:"matrix(.04258 -.0002 .0002 .04258 -.309 -.28)"}),(0,r.Lk)("path",{d:"m72.273 108.188 21.209 5.608 84.483-10.381-24.734-4.487zM152.96 99.086l.166 7.247",style:{fill:"none",stroke:"#000","stroke-width":"6.38646575","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1","stroke-dasharray":"none"},transform:"matrix(.04143 0 0 .04143 -.197 -.16)"})],-1)]))}const we={},fe=(0,l.A)(we,[["render",me]]);var ge=fe;const ve={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function ye(t,o){return(0,r.uX)(),(0,r.CE)("svg",ve,o[0]||(o[0]=[(0,r.Lk)("g",{style:{display:"inline",fill:"none",stroke:"#000","stroke-opacity":"1","stroke-width":"4.28035139","stroke-dasharray":"none"}},[(0,r.Lk)("path",{d:"m97.645 125.376-28.75 2.801-10.337-7.534 26.61-2.218zM98.425 126.486l5.512 33.617-29.512 4.25-5.178-35.794",style:{fill:"none",stroke:"#000","stroke-width":"4.28035139","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1","stroke-dasharray":"none"},transform:"matrix(.06181 0 0 .06181 -1.44 -2.587)"}),(0,r.Lk)("path",{d:"m58.173 120.765.424 29.526 16.005 14.164M98.285 125.749l40.301-70.914-16.284-1.726-36.704 65.103",style:{fill:"none",stroke:"#000","stroke-width":"4.28035139","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1","stroke-dasharray":"none"},transform:"matrix(.06181 0 0 .06181 -1.44 -2.587)"})],-1)]))}const be={},Le=(0,l.A)(be,[["render",ye]]);var Ce=Le;const xe={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function Me(t,o){return(0,r.uX)(),(0,r.CE)("svg",xe,o[0]||(o[0]=[(0,r.Lk)("g",{style:{display:"inline"}},[(0,r.Lk)("path",{d:"m48.377 41.603 111.852 4.628-.117 111.479-111.415 4.345Z",style:{fill:"none",stroke:"#000","stroke-width":"6.38646664","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1","stroke-dasharray":"none"},transform:"matrix(.04143 0 0 .04143 -.09 -.129)"})],-1)]))}const $e={},Fe=(0,l.A)($e,[["render",Me]]);var je=Fe;const Ie={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function Ee(t,o){return(0,r.uX)(),(0,r.CE)("svg",Ie,o[0]||(o[0]=[(0,r.Lk)("g",{style:{display:"inline",fill:"none",stroke:"#000","stroke-opacity":"1","stroke-width":"6.38646664","stroke-dasharray":"none"}},[(0,r.Lk)("path",{d:"m48.377 41.603 111.852 4.628-.117 111.479-111.415 4.345Z",style:{display:"inline",fill:"none",stroke:"#000","stroke-width":"6.38646664","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1","stroke-dasharray":"none"},transform:"matrix(.04143 0 0 .04143 -.031 -.012)"}),(0,r.Lk)("path",{d:"m62.652 66.35.202 46.496 83.917-1.075-.32-44.055z",style:{fill:"none",stroke:"#000","stroke-width":"6.38646664","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1","stroke-dasharray":"none"},transform:"matrix(.04143 0 0 .04143 -.031 -.012)"})],-1)]))}const Pe={},ze=(0,l.A)(Pe,[["render",Ee]]);var Oe=ze;const _e={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function Se(t,o){return(0,r.uX)(),(0,r.CE)("svg",_e,o[0]||(o[0]=[(0,r.Lk)("g",{style:{fill:"none",stroke:"#000","stroke-opacity":"1","stroke-width":"6.38646664","stroke-dasharray":"none"}},[(0,r.Lk)("path",{d:"m49.029 41.736-.478 119.732 36.217-1.25.403-92.977 41.277.88.057 89.925 33.626-1.284-.263-110.367z",style:{fill:"none",stroke:"#000","stroke-width":"6.38646664","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1","stroke-dasharray":"none"},transform:"matrix(.04143 0 0 .04143 -.025 .005)"})],-1)]))}const Re={},Ae=(0,l.A)(Re,[["render",Se]]);var Xe=Ae;const Be={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function De(t,o){return(0,r.uX)(),(0,r.CE)("svg",Be,o[0]||(o[0]=[(0,r.Lk)("g",{style:{display:"inline",fill:"none",stroke:"#000","stroke-opacity":"1","stroke-width":"6.38646664","stroke-dasharray":"none"}},[(0,r.Lk)("path",{d:"M118.038 95.787 21.77 152.166l3.205 3.359 55.16 13.817L191.223 96.88l-2.669-3.593Z",style:{fill:"none",stroke:"#000","stroke-width":"6.38646664","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1","stroke-dasharray":"none"},transform:"matrix(.04143 0 0 .04143 -.38 .877)"}),(0,r.Lk)("path",{d:"m188.504 93.434-112.27 71.847-54.589-13.015M76.723 165.483l3.051 4.095",style:{fill:"none",stroke:"#000","stroke-width":"6.38646664","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1","stroke-dasharray":"none"},transform:"matrix(.04143 0 0 .04143 -.38 .877)"})],-1)]))}const He={},Ke=(0,l.A)(He,[["render",De]]);var Te=Ke;const Ze={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function Ne(t,o){return(0,r.uX)(),(0,r.CE)("svg",Ze,o[0]||(o[0]=[(0,r.Lk)("g",{style:{display:"inline",fill:"none",stroke:"#000","stroke-opacity":"1","stroke-width":"6.38646664","stroke-dasharray":"none"}},[(0,r.Lk)("path",{d:"M73.144 55.293 31.72 149.792l47.759 13.649 5.647-.569 43.158-108.386 3.84.841 35.92 99.837 4.698-1.013-41.318-111.048-3.483-.291z",style:{fill:"none",stroke:"#000","stroke-width":"6.38646664","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1","stroke-dasharray":"none"},transform:"matrix(.04143 0 0 .04143 .125 -.098)"}),(0,r.Lk)("path",{d:"m100.551 124.15 8.444 20.122 59.53 10.836M127.907 43.127 79.494 163.579",style:{fill:"none",stroke:"#000","stroke-width":"6.38646664","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1","stroke-dasharray":"none"},transform:"matrix(.04143 0 0 .04143 .125 -.098)"})],-1)]))}const Ue={},We=(0,l.A)(Ue,[["render",Ne]]);var Ye=We;const Ve={xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 8.467 8.467"};function Je(t,o){return(0,r.uX)(),(0,r.CE)("svg",Ve,o[0]||(o[0]=[(0,r.Lk)("g",{style:{display:"inline",fill:"none",stroke:"#000","stroke-opacity":"1","stroke-width":"6.38646664","stroke-dasharray":"none"}},[(0,r.Lk)("path",{d:"M111.086 55.485 30.4 146.887l2.583 2.536L79.24 163.55l93.302-115.859-2.913-3.29z",style:{fill:"none",stroke:"#000","stroke-width":"6.38646664","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1","stroke-dasharray":"none"},transform:"matrix(.04143 0 0 .04143 -.02 -.01)"}),(0,r.Lk)("path",{d:"M169.631 44.79 76.376 160.26 30.24 147.162M79.428 163.385l-2.946-3.254",style:{fill:"none",stroke:"#000","stroke-width":"6.38646664","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-opacity":"1","stroke-dasharray":"none"},transform:"matrix(.04143 0 0 .04143 -.02 -.01)"})],-1)]))}const qe={},Qe=(0,l.A)(qe,[["render",Je]]);var Ge=Qe,ts={name:"ToolBar",emits:["tool","color"],components:{FoundationIcon:ae,PlatformIcon:ke,StairsIcon:Ce,PlatformHoleIcon:ge,WallIcon:je,DoorIcon:Xe,RampIcon:Te,SmallRoofIcon:Ye,LongRoofIcon:Ge,WindowIcon:Oe,CursorIcon:q},props:{tool:{type:[String,null],required:!0},selection:{type:[Object,null],required:!0}}};const os=(0,l.A)(ts,[["render",se],["__scopeId","data-v-8e51187e"]]);var es=os;const ss=t=>new Promise((o=>setTimeout(o,t))),rs=new f.B,ns=t=>JSON.parse(JSON.stringify(t)),ls=(t,o=!0)=>new Promise((e=>{rs.load("./glb/"+t+".glb",(t=>{const s=o?t.scene.children[0]:t.scene;e(s)}),void 0,(o=>{console.error("load error",t,o),e(null)}))})),is=t=>t instanceof p.B69&&(t.geometry&&t.geometry.dispose(),t.material&&(t.material instanceof Array?t.material.forEach((t=>t.dispose())):t.material.dispose()),t.removeFromParent(),!0),as=t=>new Promise((o=>{t.toBlob((t=>{const e=URL.createObjectURL(t);o(e)}))})),cs={foundation:.5,platform:-.55,platformhole:-.55,stairs:.5,wall:.5,window:.5,door:.5,rampup:.45,rampdown:-.05,longroof:.5,smallroof:.5},ds={scene:null,camera:null,renderer:null,grid:null,lgrid:null,controls:null,ambient:null,lights:{},models:{},materials:{},holo:null};var hs={name:"HomeView",components:{UiPanel:Jt,KeyHelpmer:Ro,ToolBar:es},data(){return{cursor:[0,1,0],tool:"select",lock:null,selection:null,construction:{},hiddenFloors:[],holoR:0,cads:{}}},async created(){await ss(0),ds.scene=new p.Z58,ds.scene.background=new p.Q1f(6710886);const t=this.$refs.v3d.getBoundingClientRect();ds.camera=new p.ubm(50,t.width/t.height,.1,100),ds.camera.position.x=5,ds.camera.position.z=5,ds.camera.position.y=5,ds.camera.lookAt(new p.Pq0(0,0,0)),ds.renderer=new m.JeP({canvas:this.$refs.canvas,alpha:!0,antialias:!0}),ds.renderer.shadowMap.enabled=!0,ds.renderer.shadowMap.type=p.Wk7,ds.renderer.outputColorSpace=p.er$,ds.renderer.setSize(t.width,t.height),ds.renderer.setAnimationLoop((()=>this.animate())),ds.lgrid=new p.fTw(10,10,11184895,10066363),ds.scene.add(ds.lgrid),ds.controls=new w.N(ds.camera,this.$refs.canvas),ds.controls.target.set(0,0,0),ds.lights.ambient=new p.$p8(16777215,.6),ds.scene.add(ds.lights.ambient),ds.lights.hemi=new p.dth(16777215,16777215,.8),ds.scene.add(ds.lights.hemi),ds.lights.dir=new p.ZyN(16777215,2.5),ds.lights.dir.position.set(10,20,10),ds.lights.dir.castShadow=!0,ds.lights.dir.shadow.bias=-.005,ds.lights.dir.shadow.mapSize.width=2048,ds.lights.dir.shadow.mapSize.height=2048,ds.lights.dir.shadow.camera.near=.5,ds.lights.dir.shadow.camera.far=50,ds.lights.dir.shadow.camera.left=-20,ds.lights.dir.shadow.camera.right=20,ds.lights.dir.shadow.camera.top=20,ds.lights.dir.shadow.camera.bottom=-20,ds.scene.add(ds.lights.dir);const o=new p.bdM(1,1);ds.cursorMaterial=new p.V9B({color:1401481,side:p.$EB,transparent:!0,opacity:.9}),ds.cursor=new p.eaF(o,ds.cursorMaterial),ds.cursor.rotateX(Math.PI/2),ds.cursor.position.set(this.cursor[0]+.5,this.cursor[1]-1,this.cursor[2]+.5),ds.scene.add(ds.cursor),ds.bbox=new p.IWo,ds.bbox.renderOrder=1e3,ds.scene.add(ds.bbox);const e=new p.bdM(100,100);ds.mplane=new p.eaF(e,ds.cursorMaterial),ds.mplane.layers.set(2),ds.mplane.rotateX(Math.PI/2),ds.scene.add(ds.mplane),await this.loadModels(),await this.loadCads(),ds.materials.wood=new p._4j({color:10387811,transparent:!0}),ds.materials.gray=new p._4j({color:5131854,transparent:!0}),ds.materials.red=new p._4j({color:10374734,transparent:!0}),ds.materials.green=new p._4j({color:5152334,transparent:!0}),ds.raycaster=new p.tBo},mounted(){window.addEventListener("keydown",this.onKeyDown),window.addEventListener("resize",this.onWindowResize)},beforeUnmount(){window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("resize",this.onWindowResize)},methods:{onWindowResize(){const t=this.$refs.v3d.getBoundingClientRect();ds.renderer.setSize(t.width,t.height),ds.camera.aspect=t.width/t.height,ds.camera.updateProjectionMatrix()},onKeyDown(t){if("INPUT"===t.target.tagName||"TEXTAREA"===t.target.tagName)return;const o=["Delete","Backspace"];switch(o.includes(t.code)&&t.preventDefault(),t.code){case"Delete":case"Backspace":case"KeyD":this.removeSelection();break;case"KeyR":this.rotateSelection();break;case"Escape":ds.holo?this.onTool("select"):this.onDeselect();break;case"ArrowUp":this.moveCursor(0,0,-1);break;case"ArrowDown":this.moveCursor(0,0,1);break;case"ArrowLeft":this.moveCursor(-1,0,0);break;case"ArrowRight":this.moveCursor(1,0,0);break;case"KeyQ":this.moveCursor(0,1,0);break;case"KeyE":this.moveCursor(0,-1,0);break;case"Digit1":this.setColor("clear");break;case"Digit2":this.setColor("red");break;case"Digit3":this.setColor("green");break;case"KeyW":this.onTool("wall");break;case"KeyF":this.onTool("foundation");break;case"KeyP":this.onTool("platform");break;case"KeyH":this.onTool("platformhole");break;case"KeyO":this.onTool("door");break;case"KeyI":this.onTool("window");break;case"KeyC":(t.ctrlKey||t.metaKey)&&(t.preventDefault(),this.save());break;case"KeyL":(t.ctrlKey||t.metaKey)&&(t.preventDefault(),this.$refs.uiPanel.$refs.fileInput.click());break}},moveCursor(t,o,e){const s=[this.cursor[0]+t,this.cursor[1]+o,this.cursor[2]+e];this.updateCursor(s)},animate(){ds.controls.update(),ds.renderer.render(ds.scene,ds.camera)},async loadModels(){const t=await ls("modulus",!1);t.children[0]?.material?.map&&(t.children[0].material.map.anisotropy=ds.renderer.capabilities.getMaxAnisotropy(),t.children[0].material.map.needsUpdate=!0),ds.models={foundation:t.children.find((t=>"foundation"===t.name)),door:t.children.find((t=>"door"===t.name)),window:t.children.find((t=>"window"===t.name)),wall:t.children.find((t=>"wall"===t.name)),longroof:t.children.find((t=>"roof_long"===t.name)),smallroof:t.children.find((t=>"roof_short"===t.name)),platform:t.children.find((t=>"platform"===t.name)),platformhole:t.children.find((t=>"hatch"===t.name)),ramp:t.children.find((t=>"ramp"===t.name)),stairs:t.children.find((t=>"stairs"===t.name))}},async loadModel(t,o){const e=await ls(t);ds.models[o||t]=e},async loadCads(){this.cads.foundation=await this.loadCad("foundation"),this.cads.platform=await this.loadCad("platform"),this.cads.platformhole=await this.loadCad("platformhole"),this.cads.wall=await this.loadCad("wall"),this.cads.door=await this.loadCad("door"),this.cads.window=await this.loadCad("window"),this.cads.stairs=await this.loadCad("stairs"),this.cads.longroof=await this.loadCad("longroof"),this.cads.smallroof=await this.loadCad("smallroof"),this.cads.rampup=await this.loadCad("rampup"),this.cads.rampdown=await this.loadCad("rampdown")},loadCad(t){const o=document.createElement("img");return o.width=128,o.height=128,new Promise((e=>{o.onload=()=>{e(o)},o.src="./svg/cad-"+t+".svg"}))},updateCursor(t){this.cursor=t,ds.cursor.position.set(this.cursor[0]+.5,this.cursor[1]-.999,this.cursor[2]+.5),ds.lgrid.position.y=this.cursor[1]-1,ds.mplane.position.y=this.cursor[1]-1,ds.holo&&this.spMesh(ds.holo,this.tool,0,!1)},addPart(t,o=0,e=!0){const s=["rampup","rampdown"].includes(t)?"ramp":t;if(!ds.models[s])return;const r=this.getPart(s);["wall","door","window"].includes(t)&&r.rotateY(-Math.PI),this.spMesh(r,t),r.castShadow=!0,r.receiveShadow=!0,ds.scene.add(r);for(let n=o;n>0;n--)r.rotateY(Math.PI/2);return this.construction[r.uuid]={part:t,position:[...this.cursor],rotation:o,color:"clear"},e?(this.selection=r,ds.bbox.setFromObject(this.selection),ds.bbox.visible=!0,this.lock=[...this.cursor],r):r},spMesh(t,o,e=0,s=!0){s&&t.scale.set(.5,.5,.5),cs[o]&&(e+=cs[o]),t.position.set(this.cursor[0]+.5,this.cursor[1]-1.5+e,this.cursor[2]+.5)},rotateSelection(){if(ds.holo)return ds.holo.rotateY(Math.PI/2),this.holoR++,void(this.holoR>=4&&(this.holoR-=4));this.selection&&(this.selection.rotateY(Math.PI/2),this.construction[this.selection.uuid].rotation++,this.construction[this.selection.uuid].rotation>=4&&(this.construction[this.selection.uuid].rotation-=4),ds.bbox.update())},removeSelection(){this.selection&&(delete this.construction[this.selection.uuid],this.selection.removeFromParent(),this.selection=null,ds.bbox.visible=!1)},onDeselect(){this.selection=null,ds.bbox.visible=!1,this.lock=null},onTool(t){const o=this.tool;if(this.tool===t){if("select"===t)return;return this.onTool("select")}if(this.tool=t,this.onDeselect(),"select"===this.tool)return ds.holo&&(is(ds.holo),ds.holo=null,this.holoR=0),void(ds.cursor.visible=!0);const e="rampup"===this.tool||"rampdown"===this.tool?"ramp":this.tool;if(ds.models[e]){if(ds.cursor.visible=!1,ds.holo&&is(ds.holo),ds.holo=this.getPart(e,ds.cursorMaterial),["wall","window","door"].includes(e)&&ds.holo.rotateY(-Math.PI),"select"===o)this.holoR=0;else for(let t=this.holoR;t>0;t--)ds.holo.rotateY(Math.PI/2);this.spMesh(ds.holo,this.tool,-1),ds.scene.add(ds.holo)}else console.warn("unknown tool",e)},getPart(t,o=null){let e=null;if("smallroof"===t||"longroof"===t){const s=ds.models[t].children[0].geometry.clone(),r=ds.models[t].children[1].geometry.clone();e=new p.YJl;const n=o?o.clone():ds.models[t].children[0].material.clone(),l=o?o.clone():ds.models[t].children[1].material.clone();o||(n.transparent=!0,l.transparent=!0);const i=new p.eaF(s,n),a=new p.eaF(r,l);o||(i.layers.enable(1),a.layers.enable(1)),e.add(i),e.add(a)}else{const s=ds.models[t].geometry.clone(),r=o?o.clone():ds.models[t].material.clone();o||(r.transparent=!0),e=new p.eaF(s,r),o||e.layers.enable(1)}return e},onClick(t){if(ds.holo)return void this.addPart(this.tool,this.holoR,!1);ds.raycaster.layers.set(1);const o=new p.I9Y;o.x=t.clientX/window.innerWidth*2-1,o.y=-t.clientY/window.innerHeight*2+1,ds.raycaster.setFromCamera(o,ds.camera);const e=ds.raycaster.intersectObjects(ds.scene.children);if(e[0]&&e[0].object)if(this.selection&&e[0].object.uuid===this.selection.uuid)this.onDeselect();else{const t=e[0].object.parent;t.isScene&&(this.selection=e[0].object),t.isGroup&&(this.selection=e[0].object.parent),ds.bbox.setFromObject(this.selection),ds.bbox.visible=!0}},onMove(t){if(this.lock||!ds.raycaster)return;ds.raycaster.layers.set(2);const o=new p.I9Y;o.x=t.clientX/window.innerWidth*2-1,o.y=-t.clientY/window.innerHeight*2+1,ds.raycaster.setFromCamera(o,ds.camera);const e=ds.raycaster.intersectObjects(ds.scene.children);if(e[0]){const t=e[0].point,o=[...this.cursor];this.updateCursor([Math.floor(t.x),o[1],Math.floor(t.z)])}},_setColor(t,o){const e=t.material;e&&(e.emissiveIntensity="clear"===o?0:.1,"green"===o&&(e.emissive=new p.Q1f(65280)),"red"===o&&(e.emissive=new p.Q1f(16711680)))},setColor(t){this.selection&&(this.selection.material?(this._setColor(this.selection,t),this.construction[this.selection.uuid]||(this.construction[this.selection.uuid]={}),this.construction[this.selection.uuid].color=t):this.selection.isGroup&&this.selection.children.forEach((o=>{this._setColor(o,t)})))},toggleFloor(t){this.hiddenFloors.includes(t)?this.hiddenFloors=this.hiddenFloors.filter((o=>o!==t)):this.hiddenFloors.push(t),this.setFloors()},_setOpacity(t,o){t&&(t.isGroup?t.children.forEach((t=>{this._setOpacity(t,o)})):o?(t.layers.disable(1),t.material.opacity=.05):(t.layers.enable(1),t.material.opacity=1))},setFloors(){Object.keys(this.construction).forEach((t=>{const o=this.construction[t],e=o.position[1],s=ds.scene.getObjectByProperty("uuid",t);s&&this._setOpacity(s,this.hiddenFloors.includes(e))}))},save(){const t={type:"construction/freedom",version:1,construction:ns(this.construction),floors:ns(this.hiddenFloors)},o=JSON.stringify(t),e=new Blob([o],{type:"text/plain"}),s=URL.createObjectURL(e),r=document.createElement("a");r.href=s,r.download="construction.json",r.click()},async loadFile(t){const o=await t.text();let e=null;try{e=JSON.parse(o)}catch(s){console.error("read file",s),e=null}e&&("construction/freedom"===e.type&&1===e.version?(this.reset(),Object.values(e.construction).forEach((t=>{this.updateCursor(t.position),this.addPart(t.part,t.rotation),this.setColor(t.color)})),this.hiddenFloors=[...e.floors],this.setFloors()):console.error("format not supported"))},reset(){this.onDeselect(),this.selection=null,Object.keys(this.construction).forEach((t=>{const o=ds.scene.getObjectByProperty("uuid",t);o&&o.removeFromParent()})),this.updateCursor([0,1,0])},async cad(){const t={x:null,y:null,z:null,layers:{}};Object.values(this.construction).forEach((o=>{t.x||(t.x={min:o.position[0],max:o.position[0]}),t.y||(t.y={min:o.position[1],max:o.position[1]}),t.z||(t.z={min:o.position[2],max:o.position[2]}),t.x.min=Math.min(t.x.min,o.position[0]),t.x.max=Math.max(t.x.max,o.position[0]),t.y.min=Math.min(t.y.min,o.position[1]),t.y.max=Math.max(t.y.max,o.position[1]),t.z.min=Math.min(t.z.min,o.position[2]),t.z.max=Math.max(t.z.max,o.position[2]),t.layers[`l${o.position[1]}`]||(t.layers[`l${o.position[1]}`]=[]),t.layers[`l${o.position[1]}`].push(o)}));const o={door:3,wall:3,window:3},e=t.x.max-t.x.min+3,s=t.z.max-t.z.min+3,r=[];for(let l=t.y.min;l<=t.y.max;l++){const n=document.createElement("canvas");n.width=128*e,n.height=128*s;const i=n.getContext("2d");Object.values(this.construction).forEach((e=>{if(e.position[1]!==l)return;if(!this.cads[e.part])return;const s=128*(e.position[0]-t.x.min+1),r=128*(e.position[2]-t.z.min+1);i.translate(s+64,r+64);const n=o[e.part]||0;for(let t=0;t<=e.rotation+n;t++)i.rotate(-Math.PI/2);i.drawImage(this.cads[e.part],-64,-64),"green"===e.color&&(i.fillStyle="#00FF0033",i.fillRect(-64,-64,128,128)),"red"===e.color&&(i.fillStyle="#FF000033",i.fillRect(-64,-64,128,128)),i.fillStyle="#FFFFFF",i.setTransform(1,0,0,1,0,0)})),i.fillStyle="#000000",i.font="32px monospace",i.fillText(this.$t("ui.floor",{num:l}),64,64),r.push(n)}const n=await Promise.all(r.map((t=>as(t))));n.forEach((t=>window.open(t,"_blank")))}},watch:{layer(t){ds.lgrid.position.y=t-1}}};const us=(0,l.A)(hs,[["render",k]]);var ks=us;const ps=[{path:"/",name:"home",component:ks}],ms=(0,d.aE)({history:(0,d.LA)("/dayz-freedom-calculator/"),routes:ps});var ws=ms,fs=e(591),gs=(0,fs.y$)({state:{},getters:{},mutations:{},actions:{},modules:{}}),vs=e(3275),ys=JSON.parse('{"lang":{"en":"En","ru":"Ru","ukr":"Ukr"},"keys":{"button":"Hot Keys","hide":"Hide","saveload":"Save/Load","save":"save","load":"load","navigation":"Navigation","movexz":"move X/Z","updown":"up/down Y","rotate":"rotate","deselect":"deselect","delete":"delete","colors":"Colors","clearredgreen":"clear/red/green","creation":"Creation"},"tools":{"select":"Select","foundation":"Foundation","platform":"Platform","platformhole":"Hatch Platform","stairs":"Stairs","wall":"Wall","window":"Window","door":"Door","rampup":"Ramp Up","rampdown":"Ramp Down","smallroof":"Small Roof","longroof":"Long Roof","clear":"Clear","red":"Red","green":"Green"},"ui":{"floor":"{num} floor","floors":"Show/hide floors","cad":"2D Plans","planks":"Planks","nails":"Nails","codelocks":"Codelocks","wpup":"Working plane up","wpdown":"Working plane down","position":"Position X/Y/Z","save":"Save to file","load":"Load from file","reset":"New","lang":"Locale"}}'),bs=JSON.parse('{"lang":{"en":"Англ","ru":"Ру","ukr":"Укр"},"keys":{"button":"Горячие клавиши","hide":"Скрыть","saveload":"Сохранить/Загрузить","save":"сохранить","load":"загрузить","navigation":"Навигация","movexz":"в плоскости X/Z","updown":"вверх/вниз Y","rotate":"повернуть","deselect":"снять выделение","delete":"удалить","colors":"Подсветка","clearredgreen":"очистить/красный/зеленый","creation":"Создание"},"tools":{"select":"выделение","foundation":"Основание","platform":"Платформа","platformhole":"Платформа с люком","stairs":"Ступени","wall":"Стена","window":"Окно","door":"Дверь","rampup":"Рампа сверху","rampdown":"Рампа снизу","smallroof":"Двухскатная крыша","longroof":"Односкатная крыша","clear":"Без подсветки","red":"Красный","green":"Зелёный"},"ui":{"floor":"{num} этаж","floors":"Показать/скрыть этажи","cad":"2Д планы","planks":"Доски","nails":"Гвозди","codelocks":"Кодлоки","wpup":"Рабочая плоскость - вверх","wpdown":"Рабочая плоскость - вниз","position":"Позиция X/Y/Z","save":"Сохранить в файл","load":"Загрузить из файла","reset":"Новый","lang":"Язык"}}'),Ls=JSON.parse('{"lang":{"en":"Англ","ru":"Рос","ukr":"Укр"},"keys":{"button":"Гарячі клавіші","hide":"Сховати","saveload":"Зберегти/Завантажити","save":"зберегти","load":"завантажити","navigation":"Навігація","movexz":"рух X/Z","updown":"вгору/вниз Y","rotate":"обернути","deselect":"зняти виділення","delete":"видалити","colors":"Підсвітка","clearredgreen":"очистити/червоний/зелений","creation":"Створення"},"tools":{"select":"Виділення","foundation":"Фундамент","platform":"Платформа","platformhole":"Платформа з люком","stairs":"Сходи","wall":"Стіна","window":"Вікно","door":"Двері","rampup":"Пандус вгору","rampdown":"Пандус вниз","smallroof":"Двосхилий дах","longroof":"Односхилий дах","clear":"Без підсвітки","red":"Червоний","green":"Зелений"},"ui":{"floor":"{num} поверх","floors":"Показати/сховати поверхи","cad":"2D плани","planks":"Дошки","nails":"Цвяхи","codelocks":"Кодові замки","wpup":"Робоча площина вгору","wpdown":"Робоча площина вниз","position":"Позиція X/Y/Z","save":"Зберегти у файл","load":"Завантажити з файлу","reset":"Новий","lang":"Мова"}}');const Cs=()=>navigator.userLanguage||navigator.languages&&navigator.languages.length&&navigator.languages[0]||navigator.language||navigator.browserLanguage||navigator.systemLanguage||"en",xs=Cs(),Ms=xs.includes("-")?xs.split("-")[0]:xs,$s=localStorage.getItem("locale")||Ms||"en",Fs=["en","ru","ukr"],js=Fs.includes($s)?$s:"en",Is=(0,vs.hU)({locale:js,fallbackLocale:"en",messages:{en:ys,ru:bs,ukr:Ls}});(0,s.Ef)(c).use(Is).use(gs).use(ws).mount("#app")}},o={};function e(s){var r=o[s];if(void 0!==r)return r.exports;var n=o[s]={exports:{}};return t[s].call(n.exports,n,n.exports,e),n.exports}e.m=t,function(){var t=[];e.O=function(o,s,r,n){if(!s){var l=1/0;for(d=0;d<t.length;d++){s=t[d][0],r=t[d][1],n=t[d][2];for(var i=!0,a=0;a<s.length;a++)(!1&n||l>=n)&&Object.keys(e.O).every((function(t){return e.O[t](s[a])}))?s.splice(a--,1):(i=!1,n<l&&(l=n));if(i){t.splice(d--,1);var c=r();void 0!==c&&(o=c)}}return o}n=n||0;for(var d=t.length;d>0&&t[d-1][2]>n;d--)t[d]=t[d-1];t[d]=[s,r,n]}}(),function(){e.n=function(t){var o=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(o,{a:o}),o}}(),function(){e.d=function(t,o){for(var s in o)e.o(o,s)&&!e.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:o[s]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)}}(),function(){var t={524:0};e.O.j=function(o){return 0===t[o]};var o=function(o,s){var r,n,l=s[0],i=s[1],a=s[2],c=0;if(l.some((function(o){return 0!==t[o]}))){for(r in i)e.o(i,r)&&(e.m[r]=i[r]);if(a)var d=a(e)}for(o&&o(s);c<l.length;c++)n=l[c],e.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return e.O(d)},s=self["webpackChunkhcalc"]=self["webpackChunkhcalc"]||[];s.forEach(o.bind(null,0)),s.push=o.bind(null,s.push.bind(s))}();var s=e.O(void 0,[504],(function(){return e(186)}));s=e.O(s)})();
//# sourceMappingURL=app.226ea69b.js.map